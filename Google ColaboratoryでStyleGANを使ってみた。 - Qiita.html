<!DOCTYPE html><html><head><meta charset="utf-8" /><title>Google ColaboratoryでStyleGANを使ってみた。 - Qiita</title><meta content="width=device-width,initial-scale=1,shrink-to-fit=no" name="viewport" /><meta content="#55c500" name="theme-color" /><meta content="XWpkTG32-_C4joZoJ_UsmDUi-zaH-hcrjF6ZC_FoFbk" name="google-site-verification" /><link href="/manifest.json" rel="manifest" /><link href="/opensearch.xml" rel="search" title="Qiita" type="application/opensearchdescription+xml" /><meta name="csrf-param" content="authenticity_token" />
<meta name="csrf-token" content="hjlY73RlODy3IuP4Hqi2udvsbntOLOQ55NKdWx9qQe1fTyP4ymDNpZqAnV9NwL6Yq9cAnErCZQoG5xfLTTK7gg==" /><link rel="shortcut icon" type="image/x-icon" href="https://cdn.qiita.com/assets/favicons/public/production-c620d3e403342b1022967ba5e3db1aaa.ico" /><link rel="apple-touch-icon" type="image/png" href="https://cdn.qiita.com/assets/favicons/public/apple-touch-icon-ec5ba42a24ae923f16825592efdc356f.png" /><link rel="stylesheet" media="all" href="https://cdn.qiita.com/assets/public/style-bb4a37b2fd2159ea75896f2f1cc75eb9.min.css" /><script src="https://cdn.qiita.com/assets/public/v3-article-bundle-942396f9c5bddb852b3c96a4e3220564.min.js" defer="defer"></script><meta name="twitter:card" content="summary_large_image"><meta content="@Qiita" name="twitter:site" /><meta content="@Phoebo8" name="twitter:creator" /><meta property="og:type" content="article"><meta property="og:title" content="Google ColaboratoryでStyleGANを使ってみた。 - Qiita"><meta property="og:image" content="https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-1.2.2&amp;w=1200&amp;mark=https%3A%2F%2Fqiita-user-contents.imgix.net%2F~text%3Fixlib%3Drb-1.2.2%26w%3D840%26h%3D380%26txt%3DGoogle%2520Colaboratory%25E3%2581%25A7StyleGAN%25E3%2582%2592%25E4%25BD%25BF%25E3%2581%25A3%25E3%2581%25A6%25E3%2581%25BF%25E3%2581%259F%25E3%2580%2582%26txt-color%3D%2523333%26txt-font%3DAvenir-Black%26txt-size%3D54%26txt-clip%3Dellipsis%26txt-align%3Dcenter%252Cmiddle%26s%3D0d570799fcc43e5235599c534fb6978c&amp;mark-align=center%2Cmiddle&amp;blend=https%3A%2F%2Fqiita-user-contents.imgix.net%2F~text%3Fixlib%3Drb-1.2.2%26w%3D840%26h%3D500%26txt%3D%2540Phoeboooo%26txt-color%3D%2523333%26txt-font%3DAvenir-Black%26txt-size%3D45%26txt-align%3Dright%252Cbottom%26s%3Db2a9876cfe9ed9b80edfce477f8f0c98&amp;blend-align=center%2Cmiddle&amp;blend-mode=normal&amp;s=8ae2d1e70cf7e93fe8b6602100504424"><meta property="og:description" content="実際に生成してみた画像



本記事について

・Google Colaboratoryで学習済みのStyleGANを使って、冒頭のような顔画像・スタイルミックスした画像・ベッドルーム・車・猫の画像を生成してみた

・StyleGAN..."><meta content="https://qiita.com/Phoeboooo/items/12d21916de56d125f0be" property="og:url" /><meta content="Qiita" property="og:site_name" /><meta content="564524038" property="fb:admins" /><meta content="Python,機械学習,MachineLearning,DeepLearning,ディープラーニング" name="keywords" /><style data-styled="true" data-styled-version="5.0.1">.iytOeR{display:inline-block;border:2px solid #ccc;font-size:1.4rem;padding:4px 0;text-align:center;cursor:pointer;width:100%;background-color:#fff;color:#333;border-color:#ddd;font-weight:bold;}
.iytOeR:hover{border-color:#adadad;background-color:#e6e6e6;color:#333;}
data-styled.g1[id="UserFollowButton-sc-1hmm0rc-0"]{content:"iytOeR,"}
.fsja-Dh > .banReason{list-style:disc;list-style-position:inside;margin:10px 0 10px;}
.fsja-Dh > .banReason > li{padding-left:12px;font-weight:bold;}
.fsja-Dh > .banReasonBody{font-size:15px;margin-bottom:10px;}
data-styled.g3[id="ArticleAlert-sc-14a2ewm-0"]{content:"fsja-Dh,"}
.ZHnTl{display:inline-block;width:56px;height:12.747967479674797px;fill:#55C500;}
data-styled.g4[id="LgtmIcon__Lgtm-sc-1e4ee48-0"]{content:"ZHnTl,"}
.pFoNU{display:inline-block;vertical-align:middle;height:12px;width:12px;fill:#777;}
data-styled.g5[id="VerticalLgtmIcon__Lgtm-sc-19v9h1n-0"]{content:"pFoNU,"}
.fEysOa{display:inline-block;vertical-align:bottom;height:17.77777777777778px;width:16px;fill:#5D707C;}
data-styled.g6[id="StockIcon__Stock-cq5opj-0"]{content:"fEysOa,"}
.hGIfZz{display:inline-block;border-radius:3px;line-height:1;overflow:hidden;vertical-align:middle;}
data-styled.g10[id="Avatar__Image-sc-1u4xwgc-0"]{content:"hGIfZz,"}
.hEwpMS{display:inline-block;box-sizing:border-box;min-width:64px;padding:6px 16px;font-size:14px;font-weight:400;height:34px;margin-bottom:0;text-align:center;white-space:nowrap;vertical-align:middle;cursor:pointer;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border:1px solid transparent;border-radius:0.2em;outline:none;color:#fff;background-color:#59bb0c;border-color:#4ea30a;}
.hEwpMS:hover{background-color:#428b09;border-color:#326a07;}
.hEwpMS:disabled{cursor:not-allowed;opacity:0.65;box-shadow:none;background-color:#59bb0c;border-color:#4ea30a;}
data-styled.g11[id="Button-sc-998iob-0"]{content:"hEwpMS,"}
.gnNGXY{margin-bottom:10px;text-align:left;}
data-styled.g18[id="CommentForm__Header-xcwl8q-0"]{content:"gnNGXY,"}
.eZJAwV{display:inline-block;line-height:36px;size:15px;font-size:15px;font-weight:bold;margin-top:0;margin-left:10px;}
data-styled.g19[id="CommentForm__HeaderTitle-xcwl8q-1"]{content:"eZJAwV,"}
.fZEEYf{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;border-top-left-radius:3px;border-top-right-radius:3px;background-color:#fafafa;border:1px solid #ccc;border-bottom:0;}
data-styled.g20[id="CommentForm__ContentHeader-xcwl8q-2"]{content:"fZEEYf,"}
.lnidcq{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;}
data-styled.g21[id="CommentForm__ContentHeaderTabs-xcwl8q-3"]{content:"lnidcq,"}
.esvsAC{padding:10px 20px;font-size:13px;color:#666;background-color:#fff;cursor:pointer;line-height:20px;}
.esvsAC hover{-webkit-text-decoration:none;text-decoration:none;}
.joOXXL{padding:10px 20px;font-size:13px;color:#aaa;cursor:pointer;line-height:20px;}
.joOXXL hover{-webkit-text-decoration:none;text-decoration:none;}
data-styled.g22[id="CommentForm__ContentHeaderTabsItem-xcwl8q-4"]{content:"esvsAC,joOXXL,"}
.jkYbvp{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;}
data-styled.g23[id="CommentForm__ContentHeaderToolbar-xcwl8q-5"]{content:"jkYbvp,"}
.eYFchP{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;width:32px;height:32px;color:#aaa;margin-right:10px;}
.eYFchP:hover{color:#666;}
data-styled.g24[id="CommentForm__ContentHeaderToolbarItem-xcwl8q-6"]{content:"eYFchP,"}
.QXFlv{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;cursor:pointer;width:32px;height:32px;color:#aaa;margin-right:10px;}
.QXFlv:hover{color:#666;-webkit-text-decoration:none;text-decoration:none;}
data-styled.g25[id="CommentForm__ContentHeaderToolbarLink-xcwl8q-7"]{content:"QXFlv,"}
.dkpzIG{padding:5px 5px 0;border:1px solid #ccc;border-top:0;border-bottom:0;background-color:#fff;}
data-styled.g28[id="CommentForm__Body-xcwl8q-10"]{content:"dkpzIG,"}
.drBRWd{padding:18px;min-height:100px;background-color:#fff;}
data-styled.g29[id="CommentForm__BodyPreview-xcwl8q-11"]{content:"drBRWd,"}
.fEfHfr{border-radius:0;font-size:14px;-webkit-transition:background-color .1s linear;transition:background-color .1s linear;min-height:100px;border:1px solid #ddd;box-shadow:inset 0 1px 3px #eee;background-color:#fafafa;padding:10px;color:#333;resize:vertical;width:100%;}
data-styled.g30[id="CommentForm__CommentFormTextarea-xcwl8q-12"]{content:"fEfHfr,"}
.XemJY{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-wrap:wrap;-ms-flex-wrap:wrap;flex-wrap:wrap;border:1px solid #ccc;border-top:0;padding:6px;min-height:46px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-webkit-justify-content:space-between;-ms-flex-pack:justify;justify-content:space-between;}
data-styled.g31[id="CommentForm__Footer-xcwl8q-13"]{content:"XemJY,"}
.hEjQqy{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}
.hEjQqy > *{margin-right:10px;}
data-styled.g32[id="CommentForm__Uploader-xcwl8q-14"]{content:"hEjQqy,"}
.hZWjpt{display:inline-block;color:#555;background-color:#fff;padding:6px 10px;font-size:13px;vertical-align:baseline;line-height:1;cursor:pointer;touch-action:manipulation;border-radius:3px;border:1px solid #ccc;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}
.hZWjpt:hover{background-color:#e6e6e6;border-color:#adadad;}
.hZWjpt > i{margin-right:8px;}
data-styled.g33[id="CommentForm__UploaderButton-xcwl8q-15"]{content:"hZWjpt,"}
.bMzayN{display:inline-block;color:rgb(153,153,153);}
data-styled.g34[id="CommentForm__UploaderText-xcwl8q-16"]{content:"bMzayN,"}
</style><script>window.frtn=window.frtn||function(){ (frtn.q=frtn.q||[]).push(arguments) };
frtn("init",{
service_id:"cova_248",
site_id:"site_134",
tag_id:"tag_283"
});
frtn("send","pageview");</script><script defer="" src="https://frtn.socdm.com/tags/insight.js" type="text/javascript"></script><script>!function(t,e){if(void 0===e[t]){e[t]=function(){e[t].clients.push(this),this._init=[Array.prototype.slice.call(arguments)]},e[t].clients=[];for(var r=function(t){return function(){return this["_"+t]=this["_"+t]||[],this["_"+t].push(Array.prototype.slice.call(arguments)),this}},s=["blockEvents","unblockEvents","setSignedMode","setAnonymousMode","resetUUID","addRecord","fetchGlobalID","set","trackEvent","trackPageview","trackClicks","ready"],n=0;n<s.length;n++){var c=s[n];e[t].prototype[c]=r(c)}var o=document.createElement("script");o.type="text/javascript",o.async=!0,o.src=("https:"===document.location.protocol?"https:":"http:")+"//cdn.treasuredata.com/sdk/2.1/td.min.js";var a=document.getElementsByTagName("script")[0];a.parentNode.insertBefore(o,a)}}("Treasure",this);

// Configure an instance for your database
var td = new Treasure({
  host: 'in.treasuredata.com',
  writeKey: '10614/f5a4453704ad12facc47fe5281fd57526a6119e9',
  database: 'qiita_public',
  startInSignedMode: true
});

// Enable cross-domain tracking
td.set('$global', 'td_global_id', 'td_global_id');
// Track pageview information to 'pageviews' table
td.set('pageviews_all', {"query_parameters":{},"path_parameters":{"controller":"public/items","action":"show","user_id":"Phoeboooo","type":"items","id":"12d21916de56d125f0be"},"user_id":595703})
td.trackPageview('pageviews_all');</script></head><body><div class="allWrapper"><div class="st-HeaderContainer"><div id="GlobalHeader-react-component-5a588e67-b907-4321-a69a-3db48468dcfd"><div class="st-Header"><div class="st-Header_container"><div class="st-Header_start"><a href="/" class="st-Header_logo mr-1"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 426.57 130"><circle cx="167.08" cy="21.4" r="12.28"></circle><path d="M250.81 29.66h23.48v18.9h-23.48z"></path><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z"></path><circle cx="216.33" cy="21.4" r="12.28"></circle></svg></a><div><div class="st-Header_realmSelector" tabindex="0"><span class="fa fa-fw fa-caret-down"></span></div><div class="st-Header_dropdown st-RealmSelector"><div class="st-RealmSelector_realms"><a class="st-Header_dropdownItem st-RealmItem" href="https://qiita.com/"><div class="st-RealmItem_statusIcon"><span class="fa fa-fw fa-check"></span></div><div class="st-RealmItem_humanName">Qiita</div></a></div><hr/><div class="st-RealmSelector_supplements"><div class="st-RealmSelector_label">ログイン中のチームがありません</div><a href="https://teams-center.qiita.com/find_team" class="st-Header_dropdownItem st-RealmSelectorSupplement"><div class="st-RealmSelectorSupplement_icon"><span class="fa fa-fw fa-sign-in"></span></div><div>Qiita Team にログイン...</div></a></div></div></div><div><div class="st-Header_community" tabindex="0">コミュニティ<span class="fa fa-fw fa-caret-down ml-1of2"></span></div><div class="st-Header_dropdown"><a href="/users" class="st-Header_dropdownItem"><span class="fa fa-fw fa-users mr-1of2"></span>ユーザー一覧</a><a href="/organizations" class="st-Header_dropdownItem"><span class="fa fa-fw fa-building-o mr-1of2"></span>Organization一覧</a><a href="/advent-calendar" class="st-Header_dropdownItem"><span class="fa fa-fw fa-calendar mr-1of2"></span>アドベントカレンダー</a><div class="st-Header_dropdownSeparator"></div><a href="https://jobs.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank"><span class="fa fa-fw fa-search mr-1of2"></span>Qiita Jobs</a><a href="https://qiitadon.com/" class="st-Header_dropdownItem" target="_blank"><span class="fa fa-fw fa-comments-o mr-1of2"></span>Qiitadon (β)</a><a href="https://zine.qiita.com/?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=header" class="st-Header_dropdownItem" target="_blank"><span class="fa fa-fw fa-newspaper-o mr-1of2"></span>Qiita Zine</a><div class="st-Header_dropdownSeparator"></div><a href="https://help.qiita.com/ja/articles/qiita-community-guideline" class="st-Header_dropdownItem" target="_blank"><span class="fa fa-fw fa-book mr-1of2"></span>コミュニティガイドライン</a><a href="https://help.qiita.com/ja/articles/qiita-article-guideline" class="st-Header_dropdownItem" target="_blank"><span class="fa fa-fw fa-book mr-1of2"></span>良い記事を書くために</a></div></div><form class="st-Header_search" action="/search" method="get"><span class="fa fa-search"></span><input type="search" class="st-Header_searchInput" autoComplete="off" placeholder="キーワードを入力" value="" name="q" required=""/></form><div class="st-Header_searchButton"><span class="fa fa-search"></span></div></div><div class="st-Header_end"><a href="/stock" class="st-Header_stock mr-2 py-2"><span class="st-Header_stock-icon"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 359.16 339" color="#fff" style="fill:#fff;width:13px;height:14.3px;display:inline-block;vertical-align:bottom"><path d="M359.16 251.41V0H0v251.41c91.24 116.79 267.92 116.79 359.16 0zm-53.22-131.26L187.73 253a23 23 0 01-16.23 7.69h-.94a23 23 0 01-15.87-6.35L54.53 158.86a23 23 0 0131.73-33.27l82.94 79.11L271.59 89.6a23 23 0 1134.35 30.55z"></path></svg></span><span class="st-Header_stock-label">ストック一覧</span></a><a href="/drafts/new" class="st-Header_postButton mr-2 px-2"><span class="fa fa-fw fa-pencil-square-o mr-1"></span>投稿する</a><div class="u-relative"><div class="st-Header_notifications" tabindex="0">0</div><div class="st-Header_notiIframe"><div class="st-Header_notiHeader"><div><span class="fa fa-bell-o mgr-1"></span>お知らせ</div><a href="/settings/notifications">通知設定</a></div><div class="st-Header_notiFooter"><a href="/notifications">通知一覧を見る</a></div></div></div><div class="u-relative"><div class="st-Header_loginUser" tabindex="0"><img src="https://qiita-user-profile-images.imgix.net/https%3A%2F%2Flh6.googleusercontent.com%2F-3EHSHCCSCmg%2FAAAAAAAAAAI%2FAAAAAAAAAAA%2FAKF05nAVp3wix0GPOS2jqZ7xSDRYCDF6Mw%2Fs50%2Fphoto.jpg?ixlib=rb-1.2.2&amp;auto=compress%2Cformat&amp;lossless=0&amp;w=48&amp;s=be4e5cacc9e0864ac1ef96d37914a7b9" alt="syoborian"/><span class="fa fa-fw fa-caret-down ml-1"></span></div><div class="st-Header_dropdown"><a href="/syoborian" class="st-Header_dropdownItem">マイページ</a><div class="st-Header_dropdownSeparator"></div><a href="/drafts" class="st-Header_dropdownItem">下書き一覧</a><a href="/syoborian/private" class="st-Header_dropdownItem">限定共有記事一覧</a><a href="/patches" class="st-Header_dropdownItem">編集リクエスト一覧</a><div class="st-Header_dropdownSeparator"></div><a href="/settings" class="st-Header_dropdownItem">設定</a><a href="https://help.qiita.com/ja/categories/qiita/" class="st-Header_dropdownItem" target="_blank">ヘルプ</a><div class="st-Header_dropdownSeparator"></div><div class="st-Header_dropdownItem" tabindex="0">ログアウト</div></div></div></div><div class="st-Header_overlay"></div><form class="st-Header_searchModal" action="/search" method="get"><input type="text" class="st-Header_searchModalInput" autoComplete="off" placeholder="キーワードを入力" value="" name="q" required=""/></form></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="GlobalHeader" data-dom-id="GlobalHeader-react-component-5a588e67-b907-4321-a69a-3db48468dcfd">{"unreadNotificationsCount":0,"realms":[{"humanName":"Qiita","isCurrentRealm":true,"isQiita":true,"isQiitaTeam":false,"loggedInUser":{"profileImageUrl":"https://lh6.googleusercontent.com/-3EHSHCCSCmg/AAAAAAAAAAI/AAAAAAAAAAA/AKF05nAVp3wix0GPOS2jqZ7xSDRYCDF6Mw/s50/photo.jpg","urlName":"syoborian"},"teamId":null,"url":"https://qiita.com/"}],"teamFindUrl":"https://teams-center.qiita.com/find_team","isTeamOnlyUser":false,"currentUser":{"isStaff":false,"isJobseeker":false,"name":"","originalId":595703,"profileImageUrl":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Flh6.googleusercontent.com%2F-3EHSHCCSCmg%2FAAAAAAAAAAI%2FAAAAAAAAAAA%2FAKF05nAVp3wix0GPOS2jqZ7xSDRYCDF6Mw%2Fs50%2Fphoto.jpg?ixlib=rb-1.2.2\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=be4e5cacc9e0864ac1ef96d37914a7b9","urlName":"syoborian"}}</script>
      
</div><div class="st-HeaderAlert st-HeaderAlert-warning"><div class="st-HeaderAlert_body"></div></div><script type="application/ld+json">{"@context":"http://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"item":{"@id":"/","name":"Qiita"}},{"@type":"ListItem","position":2,"item":{"@id":"/tags/%23%3CQiita::Graph::Result:0x00005594c8297a40%3E","name":"Python"}}]}</script><script type="application/ld+json">{"@context":"http://schema.org","@type":"Article","datePublished":"2019-04-01T08:30:18.000+09:00","dateModified":"2019-04-01T08:30:18.000+09:00","headline":"Google ColaboratoryでStyleGANを使ってみた。","image":"https://qiita-user-contents.imgix.net/https%3A%2F%2Fcdn.qiita.com%2Fassets%2Fpublic%2Farticle-ogp-background-1150d8b18a7c15795b701a55ae908f94.png?ixlib=rb-1.2.2\u0026w=1200\u0026mark=https%3A%2F%2Fqiita-user-contents.imgix.net%2F~text%3Fixlib%3Drb-1.2.2%26w%3D840%26h%3D380%26txt%3DGoogle%2520Colaboratory%25E3%2581%25A7StyleGAN%25E3%2582%2592%25E4%25BD%25BF%25E3%2581%25A3%25E3%2581%25A6%25E3%2581%25BF%25E3%2581%259F%25E3%2580%2582%26txt-color%3D%2523333%26txt-font%3DAvenir-Black%26txt-size%3D54%26txt-clip%3Dellipsis%26txt-align%3Dcenter%252Cmiddle%26s%3D0d570799fcc43e5235599c534fb6978c\u0026mark-align=center%2Cmiddle\u0026blend=https%3A%2F%2Fqiita-user-contents.imgix.net%2F~text%3Fixlib%3Drb-1.2.2%26w%3D840%26h%3D500%26txt%3D%2540Phoeboooo%26txt-color%3D%2523333%26txt-font%3DAvenir-Black%26txt-size%3D45%26txt-align%3Dright%252Cbottom%26s%3Db2a9876cfe9ed9b80edfce477f8f0c98\u0026blend-align=center%2Cmiddle\u0026blend-mode=normal\u0026s=8ae2d1e70cf7e93fe8b6602100504424","mainEntityOfPage":"https://qiita.com/Phoeboooo/items/12d21916de56d125f0be","author":{"@type":"Person","address":"","email":"thirty_forty@nifty.com","identifier":"Phoeboooo","name":"Phoeboooo","image":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fprofile-images%2F1542036351?ixlib=rb-1.2.2\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=db21db6bf61fa852966878827d97fcd6","url":"https://qiita.com/Phoeboooo","description":"何となく思ったことを公開中。\r\n24/7暇人なので、お気軽にご連絡ください。\r\n\r\nJDLA Deep Learning for /ENGINEER 2019 #1/\r\nGENERAL 2019 #1/ TOEIC965","memberOf":[]},"publisher":{"@type":"Organization","name":"Qiita","logo":{"@type":"ImageObject","url":"//cdn.qiita.com/assets/public/qiita-logo-green-36e6153054916b1d8ed7fc47163039da.png"}}}</script><script>td.trackEvent('pageviews_article',{
    user_id: "595703",
    article_id: "848368",
    article_uuid: "12d21916de56d125f0be",
    td_description: "&quot;実際に生成してみた画像\n![s_stylegan2.png](https://qiita-image-store.s3.amazonaws.com/0/315063/499fcac7-2f62-1246-8c6c-1cee87d24be5.png)\n\n\n\n#本記事について\n・**Google Colaboratoryで学習済みのStyleGAN**を使って、冒頭のような顔画像・スタイルミックスした画像・ベッドルーム・車・猫の画像を生成してみた\n\n・**StyleGANのGitHubの説明通りに行うことで学習済みモデルを使える**\n・本記事で記載するコードはその説明通りのもののため、コピペすれば同じように画像生成ができると思う\n\n・**本記事にある画像はすべて実際に学習済みのStyleGANを使って生成した画像**である\n\n#画像生成\n###①準備\n\n```python\n\n#git clone でStyleGANのコードを使えるようにする\n!git clone https://github.com/NVlabs/stylegan.git\n\n#ディレクトリ移動\ncd stylegan\n```\n\n###②generatorをロードする\n\n\n```python\n\nimport os\nimport pickle\nimport numpy as np\nimport PIL.Image\nimport dnnlib\nimport dnnlib.tflib as tflib\nimport config\n\n\n# Initialize TensorFlow.\ntflib.init_tf()\n\n# Load pre-trained network.\nurl = \u0026amp;#39;https://drive.google.com/uc?id=1MEGjdvVpUsu1jB4zrXZN7Y4kBBOzizDQ\u0026amp;#39; # karras2019stylegan-ffhq-1024x1024.pkl\nwith dnnlib.util.open_url(url, cache_dir=config.cache_dir) as f:\n    _G, _D, Gs = pickle.load(f)\n    # _G = Instantaneous snapshot of the generator. Mainly useful for resuming a previous training run.\n    # _D = Instantaneous snapshot of the discriminator. Mainly useful for resuming a previous training run.\n    # Gs = Long-term average of the generator. Yields higher-quality results than the instantaneous snapshot.\n\n```\n _G, _D, Gsの３つをロードできるが、使うのはGsのみ\n\n _G, _Dに関しては無視で大丈夫\n\n###③潜在ベクトルを選ぶ\n\n```python\n# Pick latent vector.\nrnd = np.random.RandomState(200)\nlatents = rnd.randn(1, Gs.input_shape[1])\n```\n潜在ベクトルを選ぶ上で設定するRandomStateの値（上記のコードでは200）を変えることで、異なる画像を生成することができる\n\n###④画像生成\n```python\n# Generate image.\nfmt = dict(func=tflib.convert_images_to_uint8, nchw_to_nhwc=True)\nimages = Gs.run(latents, None, truncation_psi=0.7, randomize_noise=True, output_transform=fmt)\n```\ntruncation_psiの値(上記のコードでは0.7）を変えると、画像の雰囲気を少し変えることができる\n0にすると本物画像を平均した顔、-1~1の間で調整するのが良い（後述）\n\n冒頭の顔画像はすべてtruncation_psi=0.7で生成されたもの\n\n###⑤生成画像を保存する\n```python\n# Save image.\nos.makedirs(config.result_dir, exist_ok=True)\npng_filename = os.path.join(config.result_dir, \u0026amp;#39;example200.png\u0026amp;#39;)\nPIL.Image.fromarray(images[0], \u0026amp;#39;RGB\u0026amp;#39;).save(png_filename)\n```\n\u0026amp;#39;example200\u0026amp;#39;のところは自由に画像ファイルの名前を設定する\nその他はそのまま実行する\n\n###⑥Google Colaboratory上で生成画像を表示してみる\n```python\nfrom PIL import Image\nimport matplotlib.pyplot as plt\nimport numpy as np\n\n#画像内に線を表示しない\nfig,ax = plt.subplots()\nax.tick_params(labelbottom=\u0026amp;quot;off\u0026amp;quot;,bottom=\u0026amp;quot;off\u0026amp;quot;)\nax.tick_params(labelleft=\u0026amp;quot;off\u0026amp;quot;,left=\u0026amp;quot;off\u0026amp;quot;)\nax.set_xticklabels([]) \nax.axis(\u0026amp;#39;off\u0026amp;#39;)\n#画像の読み込み\nim = Image.open(\u0026amp;quot;results/example200.png\u0026amp;quot;)\n#画像をarrayに変換\nim_list = np.asarray(im)\n#貼り付け\nplt.imshow(im_list)\n#表示\nplt.show()\n```\nRandamState(200)で画像を生成した場合（上記のコードをそのまま実行した場合）、下の画像が生成されるはず\n\u0026amp;quot;results/自分が設定したファイル名\u0026amp;quot;（この例では\u0026amp;quot;results/example200.png\u0026amp;quot;）に先ほど生成した画像がある\n![example200.png](https://qiita-image-store.s3.amazonaws.com/0/315063/19640af4-9ccb-f588-f654-e1ec7ae06f26.png)\n\n###⑦画像をダウンロードする\n```python\n\nfrom google.colab import files\nfiles.download(\u0026amp;quot;results/example200.png\u0026amp;quot;)\n```\n・画像をダウンロードするときも画像を見るときと同じように(\u0026amp;quot;results/自分が設定したファイル名\u0026amp;quot;)とする\n\n・生成画像をダウンロードしようとしてエラーメッセージ「Connection reset by peer」が出たときは、\nGoogle Colaboratoryのランタイムから「すべてのランタイムをリセット」をしてからもう一度実行するとできると思う\n\n・ダウンロードした生成画像の容量は大きいため、用途によってはリサイズする必要があるかもしれない\n下記のようなサイトで画像縮小を行うことができる\nhttps://resizer.myct.jp/\n\n#ハイパーパラメータを変えてみる\n以下２つのハイパーパラメータを変えることで様々な種類・見た目の画像が生成できる\n\n##潜在変数\n前述のようにRandomStateの値を変えることで様々な画像を生成できる\n###RandomState(841)の場合\n![exa841.png](https://qiita-image-store.s3.amazonaws.com/0/315063/5714378a-3fd1-8132-d684-52c91f749ba8.png)\n\n###RandomState(231)の場合\n![exa231.png](https://qiita-image-store.s3.amazonaws.com/0/315063/ccaca6ab-ddab-ba8d-442d-d9f927367726.png)\n\n\n\n##truncation_psi\ntruncation_psiを変えると、画像の雰囲気を変えることができる\n\ntruncation trick（どのあたりの潜在変数をとるかを選ぶ）は低解像度（4×4~32×32）のスタイルのみに適用されるため、人の特徴を変化させるはたらきがある\n\n\n実際に生成してみた以下２つの例では、性別・髪の色・髪型・眼鏡の有無などが変わっている\n\n\n###例１\n下のGIFはtruncatoin_psiを実際に-1→-0.7→-0.5→-0.2→0→0.2→0.5→0.7→1と変えて生成した画像\n\nRandomState(29)\n![stylegan.gif1.gif](https://qiita-image-store.s3.amazonaws.com/0/315063/582ab6c5-eba1-9a09-6e78-f9880fddcf0d.gif)\n\n![image.png](https://qiita-image-store.s3.amazonaws.com/0/315063/c37cae05-50f8-eba6-87b1-151363c05a25.png)\n\n###例２\nRandomState(36)\n![15538261262W1EZIoIXFo8dSD1553826124.gif](https://qiita-image-store.s3.amazonaws.com/0/315063/3d06c819-7440-6286-6285-2349d3438a52.gif)\n![image.png](https://qiita-image-store.s3.amazonaws.com/0/315063/bfddc032-6fde-d94a-b1d1-84d285af04cc.png)\n\n###イメージ\n**truncation_psi=0のとき**、生成される画像は本物画像（学習に使った画像のデータセット）を平均した顔\n＝**本物画像通りの画像が生成されるため、画像の質は高いがオリジナリティはない**\n潜在変数を変えてもtruncation_psi=0にすると同じ女性の画像（背景は異なる）が生成される\n\n**truncation_psiを少し変えると（-1~1）**本物画像から少し離れることになるため、本物画像の要素を残しながら**オリジナリティが加わった画像**ができる\n\nただ、3などに設定すると本物画像から離れすぎて変な画像になってしまう　\n\n\n![image.png](https://qiita-image-store.s3.amazonaws.com/0/315063/1174051a-ae9d-c7e0-d1ae-5f07f1ce2644.png)\n\n\n#スタイルミックス\n実際に生成してみた画像\ncoarse(4×4~8×8):3枚, middle(16×16~32×32):2枚, fine(64×64~1024×1024):1枚（下記詳細）\n黄線と黒線は区切りを明確にするために画像生成後に付け足したもの\n![image.png](https://qiita-image-store.s3.amazonaws.com/0/315063/c5981257-6757-f731-ff24-e8816d8c4636.png)\n\n##スタイルミックス画像の見方\n![image.png](https://qiita-image-store.s3.amazonaws.com/0/315063/0a5dfaed-b7e8-c084-9f2f-d423fb351a9b.png)\n\n\n\n**Destinationの画像（１列目）にSourceの画像（１行目）のスタイル（CoarseかMiddleかFine）をコピーして合わせる**\n\n\n・**Coarse styles** : 低解像度（例：4×4~8×8）のスタイル \nイメージ）ぼやけた画像見たときに捉えられる特徴（顔の向き・輪郭・眼鏡）\n\n・**Middle styles**：中間解像度（例：16×16~32×32）のスタイル\nイメージ）顔にズームインしたときに捉えられる特徴（顔のパーツの特徴）\n\n・**Fine styles** : 高解像度（例：64×64~1024×1024）のスタイル\nイメージ）ピクセルレベルで画像を見たときに捉えられる特徴（背景の色や髪の毛の色）\n\n解像度の範囲はrange(,)の値を変えることで変更できる（後述）\n\n上図ではCoarse:3, Middle:2, Fine:1となっているが、これもハイパーパラメーターであるstyle_ranges（後述）を変えることで変更できる\n\n###①Destination + Source（Coarse styles copied）の画像\n\n低解像度のスタイルだけはSourceのスタイルを使ったDestination画像\n\n例）背景・髪の色に関してはDestinationのスタイルをそのまま使い、顔の向き・輪郭・髪型・眼鏡はSourceのスタイルを使う\n\n###②Destination + Source（Middle styles copied）の画像\n\n中間解像度のスタイルだけはSourceのスタイルを使ったDestination画像\n\n例）顔の向き・輪郭・髪型に関してはDestinationのスタイルをそのまま使い、髪質・髪の色・顔のパーツはSourceのスタイルを使う\n\n###③Destination + Source（Fine styles copied）の画像\n\n高解像度のスタイルだけはSourceのスタイルを使ったDestination画像\n\n例）顔の向き・顔のパーツ・髪型に関してはDestinationのスタイルをそのまま使い、背景の色や髪の色などの細かい部分はSourceのスタイルを使う\n\n##スタイルミックスのコード\nこのコードは何も変更せずにコピペして実行すれば大丈夫\n\n```python\ndef draw_style_mixing_figure(png, Gs, w, h, src_seeds, dst_seeds, style_ranges):\n    print(png)\n    src_latents = np.stack(np.random.RandomState(seed).randn(Gs.input_shape[1]) for seed in src_seeds)\n    dst_latents = np.stack(np.random.RandomState(seed).randn(Gs.input_shape[1]) for seed in dst_seeds)\n    src_dlatents = Gs.components.mapping.run(src_latents, None) # [seed, layer, component]\n    dst_dlatents = Gs.components.mapping.run(dst_latents, None) # [seed, layer, component]\n    src_images = Gs.components.synthesis.run(src_dlatents, randomize_noise=False, **synthesis_kwargs)\n    dst_images = Gs.components.synthesis.run(dst_dlatents, randomize_noise=False, **synthesis_kwargs)\n\n    canvas = PIL.Image.new(\u0026amp;#39;RGB\u0026amp;#39;, (w * (len(src_seeds) + 1), h * (len(dst_seeds) + 1)), \u0026amp;#39;white\u0026amp;#39;)\n    for col, src_image in enumerate(list(src_images)):\n        canvas.paste(PIL.Image.fromarray(src_image, \u0026amp;#39;RGB\u0026amp;#39;), ((col + 1) * w, 0))\n    for row, dst_image in enumerate(list(dst_images)):\n        canvas.paste(PIL.Image.fromarray(dst_image, \u0026amp;#39;RGB\u0026amp;#39;), (0, (row + 1) * h))\n        row_dlatents = np.stack([dst_dlatents[row]] * len(src_seeds))\n        row_dlatents[:, style_ranges[row]] = src_dlatents[:, style_ranges[row]]\n        row_images = Gs.components.synthesis.run(row_dlatents, randomize_noise=False, **synthesis_kwargs)\n        for col, image in enumerate(list(row_images)):\n            canvas.paste(PIL.Image.fromarray(image, \u0026amp;#39;RGB\u0026amp;#39;), ((col + 1) * w, (row + 1) * h))\n    canvas.save(png)\n\n\ndef load_Gs(url):\n    if url not in _Gs_cache:\n        with dnnlib.util.open_url(url, cache_dir=config.cache_dir) as f:\n            _G, _D, Gs = pickle.load(f)\n        _Gs_cache[url] = Gs\n    return _Gs_cache[url]\n\nurl_ffhq = \u0026amp;#39;https://drive.google.com/uc?id=1MEGjdvVpUsu1jB4zrXZN7Y4kBBOzizDQ\u0026amp;#39; # karras2019stylegan-ffhq-1024x1024.pkl\n_Gs_cache = dict()\nsynthesis_kwargs = dict(output_transform=dict(func=tflib.convert_images_to_uint8, nchw_to_nhwc=True), minibatch_size=8)\n\n```\n\n上記のコードを実行したら続いて次の章のコード（draw_style_mixing_........）を実行する\n（draw_style_mixing_........）のコードは各自で自由に変更できるところがある\n##自由に変更できるところ\n```python\ndraw_style_mixing_figure(os.path.join(config.result_dir, \u0026amp;#39;figure03-style-mixing15.png\u0026amp;#39;), load_Gs(url_ffhq),\n                         w=1024, h=1024, src_seeds=[3,48,6,63,13,68], dst_seeds=[36,18,26,29,33,84],\n                         style_ranges=[range(0,4)]*3+[range(4,8)]*2+[range(8,18)]*1)\n```\n\n###src_seeds\nSource（１行目の画像）を何にするか、数字はRandomStateを意味する\n###dst_seeds\nDestination（１列目の画像）を何にするか\n###style_ranges\n####range( , )について\nGsのモデルアーキテクチャの一部は以下のようになっている\n\n**1**層目のconv: 解像度4×4、**2**層目のconv: 解像度4×4、**3**層目のconv: 解像度8×8、**4**層目のconv: 解像度8×8 \n**5**層目のconv: 解像度16×16、**6**層目のconv: 解像度16×16、**7**層目のconv: 解像度32×32、\n**8**層目のconv: 解像度32×32、**9**層目のconv: 解像度64×64、**10**層目のconv: 解像度64×64、\n**11**層目のconv: 解像度128×128、**12**層目のconv: 解像度128×128、**13**層目のconv: 解像度256×256、\n**14**層目のconv: 解像度256×256、 **15**層目のconv: 解像度512×512、**16**層目のconv: 解像度512×512\n**17**層目のconv: 解像度1024×1024、**18**層目のconv: 解像度1024×1024\n\n・１層目から１８層目を３つのグループ（CoarseとMiddleとFine）に分けたい\n\n・**Coarse, Middle, Fineのそれぞれの範囲（何層目から何層目の解像度にするのか）をrange( , )を使って自由に指定することができる**\n\n以下２つの例でどういうことかを確認してみる\n\n####例１\nCoarse：**4×4~8×8**, Middle:**16×16~32×32**, Fine:**64×64~1024×1024**と設定し、\n６枚の生成画像の内、**３**枚はSourceの低解像度(Coarse)スタイル、**２**枚はSourceの中間解像度(Middle)スタイル、**１**枚はSourceの高解像度(Fine)スタイルを使いたいときは以下のようなコードになる\n\n```python\n[range(0,4)]*3+[range(4,8)]*2+[range(8,18)]*1\n```\n\n\n$range(0,4)$＝**1**層目から**４**層目（コードは0スタートのため1つずれている）＝4×4~8×8の解像度\n$range(4,8)$＝**５**層目から**８**層目＝16×16~32×32の解像度\n$range(8,18)$＝**９**層目から**１８**層目＝64×64~1024×1024の解像度\n\nrange(,)の後にある**\\*3**と**\\*2**と**\\*1**の値を自由に変更することで、Coarse, Middle, Fineの区切りを決めることができる\n\n本章初めに添付したスタイルミックス画像はこの設定で生成されたもの\n\n####例２\n```python\n[range(0,6)]*1+[range(6,12)]*3+[range(12,18)]*2\n```\n同じように考えると例２は\nCoarse：**4×4~...&quot;",
    td_title: "&quot;Google ColaboratoryでStyleGANを使ってみた。&quot;"
  })</script><script async="" src="https://cdn.bigmining.com/private/js/qiita_bigmining.js"></script><div style="display:none"><div class="TagList__label"><span></span><span>Python</span></div><div class="TagList__label"><span></span><span>機械学習</span></div><div class="TagList__label"><span></span><span>MachineLearning</span></div><div class="TagList__label"><span></span><span>DeepLearning</span></div><div class="TagList__label"><span></span><span>ディープラーニング</span></div></div><img style="display:block;margin:0;padding:0;border:0;outline:0;width:0;height:0;line-height:0;" alt="" src="https://relay-dsp.ad-m.asia/dmp/sync/bizmatrix?pid=c3ed207b574cf11376&amp;d=x18o8hduaj&amp;uid=595703" /><script type="application/json" id="js-react-on-rails-context">{"railsEnv":"production","inMailer":false,"i18nLocale":"ja","i18nDefaultLocale":"en","href":"https://qiita.com/Phoeboooo/items/12d21916de56d125f0be","location":"/Phoeboooo/items/12d21916de56d125f0be","scheme":"https","host":"qiita.com","port":null,"pathname":"/Phoeboooo/items/12d21916de56d125f0be","search":null,"httpAcceptLanguage":"ja,en-US;q=0.9,en;q=0.8","actionPath":"public/items#show","settings":{"analyticsTrackingId":"UA-24675221-12","mixpanelToken":"17d24b448ca579c365d2d1057f3a1791","assetsMap":{},"csrfToken":"jKrLFCFWo6ZM6JsX14GxtbcHL10L4gjHnZ+8TlS21ihV3LADn1NWP2FK5bCE6bmUxzxBug8MifR/qjbeBu4sRw==","locale":"ja"},"currentUser":{"isStaff":false,"isJobseeker":false,"name":"","originalId":595703,"profileImageUrl":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Flh6.googleusercontent.com%2F-3EHSHCCSCmg%2FAAAAAAAAAAI%2FAAAAAAAAAAA%2FAKF05nAVp3wix0GPOS2jqZ7xSDRYCDF6Mw%2Fs50%2Fphoto.jpg?ixlib=rb-1.2.2\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=be4e5cacc9e0864ac1ef96d37914a7b9","urlName":"syoborian","remainingPublicImageUploadableSizeInCurrentMonth":104857600,"monthlyPublicImageUploadableSizeLimit":104857600},"isLoggedIn":true,"recaptchaSiteKey":"6LfNkiQTAAAAAM3UGnSquBy2akTITGNMO_QDxMw6","serverSide":false}</script>
<div id="PersonalArticle-react-component-78dc4751-fcbb-49e5-8f57-26398b84e275"><div class="p-items logged-in"><div class="p-items_wrapper"><div class="p-items_container"><div class="p-items_main"><div class="p-items_article"><div class="it-Header"><div class="u-flex-center-between mb-3"><div class="it-Header_info"><div class="it-Header_author"><a href="/Phoeboooo"><img src="https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fprofile-images%2F1542036351?ixlib=rb-1.2.2&amp;auto=compress%2Cformat&amp;lossless=0&amp;w=48&amp;s=1d1b57ae03ff5238c2aa8ef73a29abab" alt="Phoeboooo" class="it-Header_authorImage"/></a><a href="/Phoeboooo" class="it-Header_authorName">@<!-- -->Phoeboooo</a></div><div class="it-Header_time"><time dateTime="2019-03-31T23:30:18Z">2019年03月31日に投稿</time></div><div class="it-Header_meta"><div class="it-Header_manipulate"><div class="it-Header_dropdown"><span class="it-Header_dropdownToggle" tabindex="0"><span class="fa fa-ellipsis-h fa-lg"></span></span><div class="st-Dropdown right"><div><div class="it-Header_dropdown-title">記事の改善</div><a class="st-Dropdown_item" href="/drafts/12d21916de56d125f0be/edit"><span class="fa fa-fw fa-code-fork pr-1"></span>編集リクエストを送る</a><div class="st-Dropdown_separator"></div></div><div class="it-Header_dropdown-title">記事の情報</div><a class="st-Dropdown_item" href="/Phoeboooo/items/12d21916de56d125f0be/revisions"><span class="fa fa-fw fa-history pr-1"></span>編集履歴</a><a class="st-Dropdown_item" href="/Phoeboooo/items/12d21916de56d125f0be/patches"><span class="fa fa-fw fa-inbox pr-1"></span>編集リクエスト一覧</a><a class="st-Dropdown_item" href="/Phoeboooo/items/12d21916de56d125f0be/likers"><span style="margin-right:4px"><svg size="12" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 392.81 429" color="#777" class="VerticalLgtmIcon__Lgtm-sc-19v9h1n-0 pFoNU"><path d="M14.19 5.4h53.86v149.45h90.05v44.87H14.19zM288.4 93.77h100.79q1.29 25-5.66 45.39a96.79 96.79 0 01-20.33 34.89 92 92 0 01-32.13 22.45 104 104 0 01-40.95 7.93 109.71 109.71 0 01-76-29.92 104.05 104.05 0 01-23-32.56 95.46 95.46 0 01-8.47-39.88 94.78 94.78 0 018.47-39.87 104.38 104.38 0 0123-32.42A107.71 107.71 0 01248.23 8a110.79 110.79 0 01118.48 22.49l-35.07 35.08a51.25 51.25 0 00-17.75-15 52.83 52.83 0 00-44.67-1.23 52.92 52.92 0 00-17 12 57.07 57.07 0 00-11.45 18.11 60 60 0 00-4.23 22.77 60 60 0 004.23 22.68 56.57 56.57 0 0011.45 18.19 52.62 52.62 0 0017 12 50.5 50.5 0 0020.9 4.36q20.19 0 31.07-7.51a35.75 35.75 0 0014.46-20.55h-47.39zM51.29 279.55H0v-44.86h156v44.86h-51.13V429H51.29zM283.36 381.71l-41.72-62V429h-53.86V234.69h47.47L290 312l55.9-77.29h46.9V429h-53.86V320.27l-42.43 61.44z"></path></svg></span>LGTMしたユーザ一覧</a><a class="st-Dropdown_item" href="/Phoeboooo/items/12d21916de56d125f0be.md"><span class="fa fa-fw fa-file-text-o pr-1"></span>Markdown で本文を見る</a><div class="st-Dropdown_separator"></div><div class="st-Dropdown_item"><span class="fa fa-fw fa-volume-up pr-1"></span>記事を購読する</div><div class="st-Dropdown_item"><span class="fa fa-fw fa-flag pr-1"></span>問題がある記事を報告する</div></div></div></div><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body"><form><div class="st-Form"><span class="st-Form_label">この記事にどのような問題がありますか？</span></div><div class="st-Form"><label><input type="radio" name="reason" value="illegal" required=""/>法律違反（著作権侵害、プライバシー侵害、名誉棄損等）</label></div><div class="st-Form"><label><input type="radio" name="reason" value="inappropriate_content" required=""/>社会的に不適切（公序良俗に反する）</label></div><div class="st-Form"><label><input type="radio" name="reason" value="advertising" required=""/>宣伝行為</label></div><div class="st-Form"><label><input type="radio" name="reason" value="spam" required=""/>スパムの疑い</label></div><div class="st-Form"><label><input type="radio" name="reason" value="guideline_violation" required=""/>上記以外だが、Qiitaのコミュニティにふさわしくない（ガイドライン違反）</label></div><div class="st-Form st-Form-right"><input type="submit" class="st-Form_submit" value="送信"/></div></form></div></div></div></div></div><h1 class="it-Header_title">Google ColaboratoryでStyleGANを使ってみた。</h1><div class="it-Tags"><a href="/tags/python" class="it-Tags_item"><span>Python</span></a><a href="/tags/%e6%a9%9f%e6%a2%b0%e5%ad%a6%e7%bf%92" class="it-Tags_item"><span>機械学習</span></a><a href="/tags/machinelearning" class="it-Tags_item"><span>MachineLearning</span></a><a href="/tags/deeplearning" class="it-Tags_item"><span>DeepLearning</span></a><a href="/tags/%e3%83%87%e3%82%a3%e3%83%bc%e3%83%97%e3%83%a9%e3%83%bc%e3%83%8b%e3%83%b3%e3%82%b0" class="it-Tags_item"><span>ディープラーニング</span></a></div></div><div class="it-DeprecationAlert_one mb-5 p-2"><span class="fa fa-warning mr-1"></span>この記事は最終更新日から1年以上が経過しています。</div><section class="it-MdContent"><div id="personal-public-article-body"><div><p>実際に生成してみた画像<br>
<a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F499fcac7-2f62-1246-8c6c-1cee87d24be5.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=552a85f6b5c35a8525118cdce5419d46" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F499fcac7-2f62-1246-8c6c-1cee87d24be5.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=552a85f6b5c35a8525118cdce5419d46" alt="s_stylegan2.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/315063/499fcac7-2f62-1246-8c6c-1cee87d24be5.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F499fcac7-2f62-1246-8c6c-1cee87d24be5.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=19e02ceca58d4703219f1165cb4533a7 1x" loading="lazy"></a></p>

<h1>
<span id="本記事について" class="fragment"></span><a href="#%E6%9C%AC%E8%A8%98%E4%BA%8B%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>本記事について</h1>

<p>・<strong>Google Colaboratoryで学習済みのStyleGAN</strong>を使って、冒頭のような顔画像・スタイルミックスした画像・ベッドルーム・車・猫の画像を生成してみた</p>

<p>・<strong>StyleGANのGitHubの説明通りに行うことで学習済みモデルを使える</strong><br>
・本記事で記載するコードはその説明通りのもののため、コピペすれば同じように画像生成ができると思う</p>

<p>・<strong>本記事にある画像はすべて実際に学習済みのStyleGANを使って生成した画像</strong>である</p>

<h1>
<span id="画像生成" class="fragment"></span><a href="#%E7%94%BB%E5%83%8F%E7%94%9F%E6%88%90"><i class="fa fa-link"></i></a>画像生成</h1>

<h3>
<span id="準備" class="fragment"></span><a href="#%E6%BA%96%E5%82%99"><i class="fa fa-link"></i></a>①準備</h3>

<div class="code-frame" data-lang="python"><div class="highlight"><pre>
<span class="c1">#git clone でStyleGANのコードを使えるようにする
</span><span class="err">!</span><span class="n">git</span> <span class="n">clone</span> <span class="n">https</span><span class="p">:</span><span class="o">//</span><span class="n">github</span><span class="p">.</span><span class="n">com</span><span class="o">/</span><span class="n">NVlabs</span><span class="o">/</span><span class="n">stylegan</span><span class="p">.</span><span class="n">git</span>

<span class="c1">#ディレクトリ移動
</span><span class="n">cd</span> <span class="n">stylegan</span>
</pre></div></div>

<h3>
<span id="generatorをロードする" class="fragment"></span><a href="#generator%E3%82%92%E3%83%AD%E3%83%BC%E3%83%89%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>②generatorをロードする</h3>

<div class="code-frame" data-lang="python"><div class="highlight"><pre>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">PIL.Image</span>
<span class="kn">import</span> <span class="nn">dnnlib</span>
<span class="kn">import</span> <span class="nn">dnnlib.tflib</span> <span class="k">as</span> <span class="n">tflib</span>
<span class="kn">import</span> <span class="nn">config</span>


<span class="c1"># Initialize TensorFlow.
</span><span class="n">tflib</span><span class="p">.</span><span class="n">init_tf</span><span class="p">()</span>

<span class="c1"># Load pre-trained network.
</span><span class="n">url</span> <span class="o">=</span> <span class="s">'https://drive.google.com/uc?id=1MEGjdvVpUsu1jB4zrXZN7Y4kBBOzizDQ'</span> <span class="c1"># karras2019stylegan-ffhq-1024x1024.pkl
</span><span class="k">with</span> <span class="n">dnnlib</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="n">open_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">cache_dir</span><span class="o">=</span><span class="n">config</span><span class="p">.</span><span class="n">cache_dir</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">_G</span><span class="p">,</span> <span class="n">_D</span><span class="p">,</span> <span class="n">Gs</span> <span class="o">=</span> <span class="n">pickle</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
    <span class="c1"># _G = Instantaneous snapshot of the generator. Mainly useful for resuming a previous training run.
</span>    <span class="c1"># _D = Instantaneous snapshot of the discriminator. Mainly useful for resuming a previous training run.
</span>    <span class="c1"># Gs = Long-term average of the generator. Yields higher-quality results than the instantaneous snapshot.
</span>
</pre></div></div>

<p>_G, _D, Gsの３つをロードできるが、使うのはGsのみ</p>

<p>_G, _Dに関しては無視で大丈夫</p>

<h3>
<span id="潜在ベクトルを選ぶ" class="fragment"></span><a href="#%E6%BD%9C%E5%9C%A8%E3%83%99%E3%82%AF%E3%83%88%E3%83%AB%E3%82%92%E9%81%B8%E3%81%B6"><i class="fa fa-link"></i></a>③潜在ベクトルを選ぶ</h3>

<div class="code-frame" data-lang="python"><div class="highlight"><pre><span class="c1"># Pick latent vector.
</span><span class="n">rnd</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">RandomState</span><span class="p">(</span><span class="mi">200</span><span class="p">)</span>
<span class="n">latents</span> <span class="o">=</span> <span class="n">rnd</span><span class="p">.</span><span class="n">randn</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">Gs</span><span class="p">.</span><span class="n">input_shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
</pre></div></div>

<p>潜在ベクトルを選ぶ上で設定するRandomStateの値（上記のコードでは200）を変えることで、異なる画像を生成することができる</p>

<h3>
<span id="画像生成-1" class="fragment"></span><a href="#%E7%94%BB%E5%83%8F%E7%94%9F%E6%88%90-1"><i class="fa fa-link"></i></a>④画像生成</h3>

<div class="code-frame" data-lang="python"><div class="highlight"><pre><span class="c1"># Generate image.
</span><span class="n">fmt</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">tflib</span><span class="p">.</span><span class="n">convert_images_to_uint8</span><span class="p">,</span> <span class="n">nchw_to_nhwc</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">images</span> <span class="o">=</span> <span class="n">Gs</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">latents</span><span class="p">,</span> <span class="bp">None</span><span class="p">,</span> <span class="n">truncation_psi</span><span class="o">=</span><span class="mf">0.7</span><span class="p">,</span> <span class="n">randomize_noise</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">output_transform</span><span class="o">=</span><span class="n">fmt</span><span class="p">)</span>
</pre></div></div>

<p>truncation_psiの値(上記のコードでは0.7）を変えると、画像の雰囲気を少し変えることができる<br>
0にすると本物画像を平均した顔、-1~1の間で調整するのが良い（後述）</p>

<p>冒頭の顔画像はすべてtruncation_psi=0.7で生成されたもの</p>

<h3>
<span id="生成画像を保存する" class="fragment"></span><a href="#%E7%94%9F%E6%88%90%E7%94%BB%E5%83%8F%E3%82%92%E4%BF%9D%E5%AD%98%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>⑤生成画像を保存する</h3>

<div class="code-frame" data-lang="python"><div class="highlight"><pre><span class="c1"># Save image.
</span><span class="n">os</span><span class="p">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">config</span><span class="p">.</span><span class="n">result_dir</span><span class="p">,</span> <span class="n">exist_ok</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="n">png_filename</span> <span class="o">=</span> <span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">config</span><span class="p">.</span><span class="n">result_dir</span><span class="p">,</span> <span class="s">'example200.png'</span><span class="p">)</span>
<span class="n">PIL</span><span class="p">.</span><span class="n">Image</span><span class="p">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">images</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s">'RGB'</span><span class="p">).</span><span class="n">save</span><span class="p">(</span><span class="n">png_filename</span><span class="p">)</span>
</pre></div></div>

<p>'example200'のところは自由に画像ファイルの名前を設定する<br>
その他はそのまま実行する</p>

<h3>
<span id="google-colaboratory上で生成画像を表示してみる" class="fragment"></span><a href="#google-colaboratory%E4%B8%8A%E3%81%A7%E7%94%9F%E6%88%90%E7%94%BB%E5%83%8F%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>⑥Google Colaboratory上で生成画像を表示してみる</h3>

<div class="code-frame" data-lang="python"><div class="highlight"><pre><span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="k">as</span> <span class="n">plt</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>

<span class="c1">#画像内に線を表示しない
</span><span class="n">fig</span><span class="p">,</span><span class="n">ax</span> <span class="o">=</span> <span class="n">plt</span><span class="p">.</span><span class="n">subplots</span><span class="p">()</span>
<span class="n">ax</span><span class="p">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelbottom</span><span class="o">=</span><span class="s">"off"</span><span class="p">,</span><span class="n">bottom</span><span class="o">=</span><span class="s">"off"</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">tick_params</span><span class="p">(</span><span class="n">labelleft</span><span class="o">=</span><span class="s">"off"</span><span class="p">,</span><span class="n">left</span><span class="o">=</span><span class="s">"off"</span><span class="p">)</span>
<span class="n">ax</span><span class="p">.</span><span class="n">set_xticklabels</span><span class="p">([])</span> 
<span class="n">ax</span><span class="p">.</span><span class="n">axis</span><span class="p">(</span><span class="s">'off'</span><span class="p">)</span>
<span class="c1">#画像の読み込み
</span><span class="n">im</span> <span class="o">=</span> <span class="n">Image</span><span class="p">.</span><span class="nb">open</span><span class="p">(</span><span class="s">"results/example200.png"</span><span class="p">)</span>
<span class="c1">#画像をarrayに変換
</span><span class="n">im_list</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">asarray</span><span class="p">(</span><span class="n">im</span><span class="p">)</span>
<span class="c1">#貼り付け
</span><span class="n">plt</span><span class="p">.</span><span class="n">imshow</span><span class="p">(</span><span class="n">im_list</span><span class="p">)</span>
<span class="c1">#表示
</span><span class="n">plt</span><span class="p">.</span><span class="n">show</span><span class="p">()</span>
</pre></div></div>

<p>RandamState(200)で画像を生成した場合（上記のコードをそのまま実行した場合）、下の画像が生成されるはず<br>
"results/自分が設定したファイル名"（この例では"results/example200.png"）に先ほど生成した画像がある<br>
<a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F19640af4-9ccb-f588-f654-e1ec7ae06f26.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ac0f6dcdbfba2da6b28ce02570170ba2" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F19640af4-9ccb-f588-f654-e1ec7ae06f26.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=ac0f6dcdbfba2da6b28ce02570170ba2" alt="example200.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/315063/19640af4-9ccb-f588-f654-e1ec7ae06f26.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F19640af4-9ccb-f588-f654-e1ec7ae06f26.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=69a605769420eddfaee8f00837255e1a 1x" loading="lazy"></a></p>

<h3>
<span id="画像をダウンロードする" class="fragment"></span><a href="#%E7%94%BB%E5%83%8F%E3%82%92%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89%E3%81%99%E3%82%8B"><i class="fa fa-link"></i></a>⑦画像をダウンロードする</h3>

<div class="code-frame" data-lang="python"><div class="highlight"><pre>
<span class="kn">from</span> <span class="nn">google.colab</span> <span class="kn">import</span> <span class="n">files</span>
<span class="n">files</span><span class="p">.</span><span class="n">download</span><span class="p">(</span><span class="s">"results/example200.png"</span><span class="p">)</span>
</pre></div></div>

<p>・画像をダウンロードするときも画像を見るときと同じように("results/自分が設定したファイル名")とする</p>

<p>・生成画像をダウンロードしようとしてエラーメッセージ「Connection reset by peer」が出たときは、<br>
Google Colaboratoryのランタイムから「すべてのランタイムをリセット」をしてからもう一度実行するとできると思う</p>

<p>・ダウンロードした生成画像の容量は大きいため、用途によってはリサイズする必要があるかもしれない<br>
下記のようなサイトで画像縮小を行うことができる<br>
<a href="https://resizer.myct.jp/" class="autolink" rel="nofollow noopener" target="_blank">https://resizer.myct.jp/</a></p>

<h1>
<span id="ハイパーパラメータを変えてみる" class="fragment"></span><a href="#%E3%83%8F%E3%82%A4%E3%83%91%E3%83%BC%E3%83%91%E3%83%A9%E3%83%A1%E3%83%BC%E3%82%BF%E3%82%92%E5%A4%89%E3%81%88%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>ハイパーパラメータを変えてみる</h1>

<p>以下２つのハイパーパラメータを変えることで様々な種類・見た目の画像が生成できる</p>

<h2>
<span id="潜在変数" class="fragment"></span><a href="#%E6%BD%9C%E5%9C%A8%E5%A4%89%E6%95%B0"><i class="fa fa-link"></i></a>潜在変数</h2>

<p>前述のようにRandomStateの値を変えることで様々な画像を生成できる</p>

<h3>
<span id="randomstate841の場合" class="fragment"></span><a href="#randomstate841%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>RandomState(841)の場合</h3>

<p><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F5714378a-3fd1-8132-d684-52c91f749ba8.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5835f8c9224c6a3d7be0f1f4af6e39e8" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F5714378a-3fd1-8132-d684-52c91f749ba8.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5835f8c9224c6a3d7be0f1f4af6e39e8" alt="exa841.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/315063/5714378a-3fd1-8132-d684-52c91f749ba8.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F5714378a-3fd1-8132-d684-52c91f749ba8.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=667bfe387ed731d2ad81afafc065ce7e 1x" loading="lazy"></a></p>

<h3>
<span id="randomstate231の場合" class="fragment"></span><a href="#randomstate231%E3%81%AE%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>RandomState(231)の場合</h3>

<p><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fccaca6ab-ddab-ba8d-442d-d9f927367726.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7d3a50b2a07aa0426c09debeec29b8b5" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fccaca6ab-ddab-ba8d-442d-d9f927367726.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7d3a50b2a07aa0426c09debeec29b8b5" alt="exa231.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/315063/ccaca6ab-ddab-ba8d-442d-d9f927367726.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fccaca6ab-ddab-ba8d-442d-d9f927367726.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=af33daeb05519bd13640a4a8d33bf5b7 1x" loading="lazy"></a></p>

<h2>
<span id="truncation_psi" class="fragment"></span><a href="#truncation_psi"><i class="fa fa-link"></i></a>truncation_psi</h2>

<p>truncation_psiを変えると、画像の雰囲気を変えることができる</p>

<p>truncation trick（どのあたりの潜在変数をとるかを選ぶ）は低解像度（4×4~32×32）のスタイルのみに適用されるため、人の特徴を変化させるはたらきがある</p>

<p>実際に生成してみた以下２つの例では、性別・髪の色・髪型・眼鏡の有無などが変わっている</p>

<h3>
<span id="例１" class="fragment"></span><a href="#%E4%BE%8B%EF%BC%91"><i class="fa fa-link"></i></a>例１</h3>

<p>下のGIFはtruncatoin_psiを実際に-1→-0.7→-0.5→-0.2→0→0.2→0.5→0.7→1と変えて生成した画像</p>

<p>RandomState(29)<br>
<a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F582ab6c5-eba1-9a09-6e78-f9880fddcf0d.gif?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f8e6442a487a6091f61746ebf11ee88e" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F582ab6c5-eba1-9a09-6e78-f9880fddcf0d.gif?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=f8e6442a487a6091f61746ebf11ee88e" alt="stylegan.gif1.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/315063/582ab6c5-eba1-9a09-6e78-f9880fddcf0d.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F582ab6c5-eba1-9a09-6e78-f9880fddcf0d.gif?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=40b8c2e5172712d5ca6a133a42aa40cc 1x" loading="lazy"></a></p>

<p><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fc37cae05-50f8-eba6-87b1-151363c05a25.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=58ec105c923450d480c059c286fe2c99" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fc37cae05-50f8-eba6-87b1-151363c05a25.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=58ec105c923450d480c059c286fe2c99" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/315063/c37cae05-50f8-eba6-87b1-151363c05a25.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fc37cae05-50f8-eba6-87b1-151363c05a25.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=ee5504866f1e022c018705436e9afecf 1x" loading="lazy"></a></p>

<h3>
<span id="例２" class="fragment"></span><a href="#%E4%BE%8B%EF%BC%92"><i class="fa fa-link"></i></a>例２</h3>

<p>RandomState(36)<br>
<a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F3d06c819-7440-6286-6285-2349d3438a52.gif?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9c414a4eef6e64224df6142b1b111cd1" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F3d06c819-7440-6286-6285-2349d3438a52.gif?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=9c414a4eef6e64224df6142b1b111cd1" alt="15538261262W1EZIoIXFo8dSD1553826124.gif" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/315063/3d06c819-7440-6286-6285-2349d3438a52.gif" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F3d06c819-7440-6286-6285-2349d3438a52.gif?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=780553e9444819c3da828139734a8219 1x" loading="lazy"></a><br>
<a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fbfddc032-6fde-d94a-b1d1-84d285af04cc.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7845d6a9b92cdd19959585d1598de590" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fbfddc032-6fde-d94a-b1d1-84d285af04cc.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=7845d6a9b92cdd19959585d1598de590" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/315063/bfddc032-6fde-d94a-b1d1-84d285af04cc.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fbfddc032-6fde-d94a-b1d1-84d285af04cc.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=9083de69120162b1ce25ee741d13b704 1x" loading="lazy"></a></p>

<h3>
<span id="イメージ" class="fragment"></span><a href="#%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8"><i class="fa fa-link"></i></a>イメージ</h3>

<p><strong>truncation_psi=0のとき</strong>、生成される画像は本物画像（学習に使った画像のデータセット）を平均した顔<br>
＝<strong>本物画像通りの画像が生成されるため、画像の質は高いがオリジナリティはない</strong><br>
潜在変数を変えてもtruncation_psi=0にすると同じ女性の画像（背景は異なる）が生成される</p>

<p><strong>truncation_psiを少し変えると（-1~1）</strong>本物画像から少し離れることになるため、本物画像の要素を残しながら<strong>オリジナリティが加わった画像</strong>ができる</p>

<p>ただ、3などに設定すると本物画像から離れすぎて変な画像になってしまう　</p>

<p><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F1174051a-ae9d-c7e0-d1ae-5f07f1ce2644.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5dccbacf15885ae69f4d03e84dd86a12" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F1174051a-ae9d-c7e0-d1ae-5f07f1ce2644.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5dccbacf15885ae69f4d03e84dd86a12" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/315063/1174051a-ae9d-c7e0-d1ae-5f07f1ce2644.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F1174051a-ae9d-c7e0-d1ae-5f07f1ce2644.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=620d148063b2bf1fcffeedc3e9255b63 1x" loading="lazy"></a></p>

<h1>
<span id="スタイルミックス" class="fragment"></span><a href="#%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB%E3%83%9F%E3%83%83%E3%82%AF%E3%82%B9"><i class="fa fa-link"></i></a>スタイルミックス</h1>

<p>実際に生成してみた画像<br>
coarse(4×4~8×8):3枚, middle(16×16~32×32):2枚, fine(64×64~1024×1024):1枚（下記詳細）<br>
黄線と黒線は区切りを明確にするために画像生成後に付け足したもの<br>
<a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fc5981257-6757-f731-ff24-e8816d8c4636.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0180cfa8bdeb1e64ccd03f7f4cc99d40" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fc5981257-6757-f731-ff24-e8816d8c4636.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=0180cfa8bdeb1e64ccd03f7f4cc99d40" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/315063/c5981257-6757-f731-ff24-e8816d8c4636.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fc5981257-6757-f731-ff24-e8816d8c4636.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a87f4cbb809eda81172c152ec13d5b98 1x" loading="lazy"></a></p>

<h2>
<span id="スタイルミックス画像の見方" class="fragment"></span><a href="#%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB%E3%83%9F%E3%83%83%E3%82%AF%E3%82%B9%E7%94%BB%E5%83%8F%E3%81%AE%E8%A6%8B%E6%96%B9"><i class="fa fa-link"></i></a>スタイルミックス画像の見方</h2>

<p><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F0a5dfaed-b7e8-c084-9f2f-d423fb351a9b.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d7ee00a9f01160ffbb292ae1e70f9f16" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F0a5dfaed-b7e8-c084-9f2f-d423fb351a9b.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=d7ee00a9f01160ffbb292ae1e70f9f16" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/315063/0a5dfaed-b7e8-c084-9f2f-d423fb351a9b.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F0a5dfaed-b7e8-c084-9f2f-d423fb351a9b.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=d1cfe0d0ccd08cf94e908203970f4a94 1x" loading="lazy"></a></p>

<p><strong>Destinationの画像（１列目）にSourceの画像（１行目）のスタイル（CoarseかMiddleかFine）をコピーして合わせる</strong></p>

<p>・<strong>Coarse styles</strong> : 低解像度（例：4×4~8×8）のスタイル <br>
イメージ）ぼやけた画像見たときに捉えられる特徴（顔の向き・輪郭・眼鏡）</p>

<p>・<strong>Middle styles</strong>：中間解像度（例：16×16~32×32）のスタイル<br>
イメージ）顔にズームインしたときに捉えられる特徴（顔のパーツの特徴）</p>

<p>・<strong>Fine styles</strong> : 高解像度（例：64×64~1024×1024）のスタイル<br>
イメージ）ピクセルレベルで画像を見たときに捉えられる特徴（背景の色や髪の毛の色）</p>

<p>解像度の範囲はrange(,)の値を変えることで変更できる（後述）</p>

<p>上図ではCoarse:3, Middle:2, Fine:1となっているが、これもハイパーパラメーターであるstyle_ranges（後述）を変えることで変更できる</p>

<h3>
<span id="destination--sourcecoarse-styles-copiedの画像" class="fragment"></span><a href="#destination--sourcecoarse-styles-copied%E3%81%AE%E7%94%BB%E5%83%8F"><i class="fa fa-link"></i></a>①Destination + Source（Coarse styles copied）の画像</h3>

<p>低解像度のスタイルだけはSourceのスタイルを使ったDestination画像</p>

<p>例）背景・髪の色に関してはDestinationのスタイルをそのまま使い、顔の向き・輪郭・髪型・眼鏡はSourceのスタイルを使う</p>

<h3>
<span id="destination--sourcemiddle-styles-copiedの画像" class="fragment"></span><a href="#destination--sourcemiddle-styles-copied%E3%81%AE%E7%94%BB%E5%83%8F"><i class="fa fa-link"></i></a>②Destination + Source（Middle styles copied）の画像</h3>

<p>中間解像度のスタイルだけはSourceのスタイルを使ったDestination画像</p>

<p>例）顔の向き・輪郭・髪型に関してはDestinationのスタイルをそのまま使い、髪質・髪の色・顔のパーツはSourceのスタイルを使う</p>

<h3>
<span id="destination--sourcefine-styles-copiedの画像" class="fragment"></span><a href="#destination--sourcefine-styles-copied%E3%81%AE%E7%94%BB%E5%83%8F"><i class="fa fa-link"></i></a>③Destination + Source（Fine styles copied）の画像</h3>

<p>高解像度のスタイルだけはSourceのスタイルを使ったDestination画像</p>

<p>例）顔の向き・顔のパーツ・髪型に関してはDestinationのスタイルをそのまま使い、背景の色や髪の色などの細かい部分はSourceのスタイルを使う</p>

<h2>
<span id="スタイルミックスのコード" class="fragment"></span><a href="#%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB%E3%83%9F%E3%83%83%E3%82%AF%E3%82%B9%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>スタイルミックスのコード</h2>

<p>このコードは何も変更せずにコピペして実行すれば大丈夫</p>

<div class="code-frame" data-lang="python"><div class="highlight"><pre><span class="k">def</span> <span class="nf">draw_style_mixing_figure</span><span class="p">(</span><span class="n">png</span><span class="p">,</span> <span class="n">Gs</span><span class="p">,</span> <span class="n">w</span><span class="p">,</span> <span class="n">h</span><span class="p">,</span> <span class="n">src_seeds</span><span class="p">,</span> <span class="n">dst_seeds</span><span class="p">,</span> <span class="n">style_ranges</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="n">png</span><span class="p">)</span>
    <span class="n">src_latents</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">stack</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">RandomState</span><span class="p">(</span><span class="n">seed</span><span class="p">).</span><span class="n">randn</span><span class="p">(</span><span class="n">Gs</span><span class="p">.</span><span class="n">input_shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">seed</span> <span class="ow">in</span> <span class="n">src_seeds</span><span class="p">)</span>
    <span class="n">dst_latents</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">stack</span><span class="p">(</span><span class="n">np</span><span class="p">.</span><span class="n">random</span><span class="p">.</span><span class="n">RandomState</span><span class="p">(</span><span class="n">seed</span><span class="p">).</span><span class="n">randn</span><span class="p">(</span><span class="n">Gs</span><span class="p">.</span><span class="n">input_shape</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span> <span class="k">for</span> <span class="n">seed</span> <span class="ow">in</span> <span class="n">dst_seeds</span><span class="p">)</span>
    <span class="n">src_dlatents</span> <span class="o">=</span> <span class="n">Gs</span><span class="p">.</span><span class="n">components</span><span class="p">.</span><span class="n">mapping</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">src_latents</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="c1"># [seed, layer, component]
</span>    <span class="n">dst_dlatents</span> <span class="o">=</span> <span class="n">Gs</span><span class="p">.</span><span class="n">components</span><span class="p">.</span><span class="n">mapping</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">dst_latents</span><span class="p">,</span> <span class="bp">None</span><span class="p">)</span> <span class="c1"># [seed, layer, component]
</span>    <span class="n">src_images</span> <span class="o">=</span> <span class="n">Gs</span><span class="p">.</span><span class="n">components</span><span class="p">.</span><span class="n">synthesis</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">src_dlatents</span><span class="p">,</span> <span class="n">randomize_noise</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">**</span><span class="n">synthesis_kwargs</span><span class="p">)</span>
    <span class="n">dst_images</span> <span class="o">=</span> <span class="n">Gs</span><span class="p">.</span><span class="n">components</span><span class="p">.</span><span class="n">synthesis</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">dst_dlatents</span><span class="p">,</span> <span class="n">randomize_noise</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">**</span><span class="n">synthesis_kwargs</span><span class="p">)</span>

    <span class="n">canvas</span> <span class="o">=</span> <span class="n">PIL</span><span class="p">.</span><span class="n">Image</span><span class="p">.</span><span class="n">new</span><span class="p">(</span><span class="s">'RGB'</span><span class="p">,</span> <span class="p">(</span><span class="n">w</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">src_seeds</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">),</span> <span class="n">h</span> <span class="o">*</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">dst_seeds</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)),</span> <span class="s">'white'</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">col</span><span class="p">,</span> <span class="n">src_image</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">src_images</span><span class="p">)):</span>
        <span class="n">canvas</span><span class="p">.</span><span class="n">paste</span><span class="p">(</span><span class="n">PIL</span><span class="p">.</span><span class="n">Image</span><span class="p">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">src_image</span><span class="p">,</span> <span class="s">'RGB'</span><span class="p">),</span> <span class="p">((</span><span class="n">col</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">w</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="k">for</span> <span class="n">row</span><span class="p">,</span> <span class="n">dst_image</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">dst_images</span><span class="p">)):</span>
        <span class="n">canvas</span><span class="p">.</span><span class="n">paste</span><span class="p">(</span><span class="n">PIL</span><span class="p">.</span><span class="n">Image</span><span class="p">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">dst_image</span><span class="p">,</span> <span class="s">'RGB'</span><span class="p">),</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="n">row</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">h</span><span class="p">))</span>
        <span class="n">row_dlatents</span> <span class="o">=</span> <span class="n">np</span><span class="p">.</span><span class="n">stack</span><span class="p">([</span><span class="n">dst_dlatents</span><span class="p">[</span><span class="n">row</span><span class="p">]]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">src_seeds</span><span class="p">))</span>
        <span class="n">row_dlatents</span><span class="p">[:,</span> <span class="n">style_ranges</span><span class="p">[</span><span class="n">row</span><span class="p">]]</span> <span class="o">=</span> <span class="n">src_dlatents</span><span class="p">[:,</span> <span class="n">style_ranges</span><span class="p">[</span><span class="n">row</span><span class="p">]]</span>
        <span class="n">row_images</span> <span class="o">=</span> <span class="n">Gs</span><span class="p">.</span><span class="n">components</span><span class="p">.</span><span class="n">synthesis</span><span class="p">.</span><span class="n">run</span><span class="p">(</span><span class="n">row_dlatents</span><span class="p">,</span> <span class="n">randomize_noise</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="o">**</span><span class="n">synthesis_kwargs</span><span class="p">)</span>
        <span class="k">for</span> <span class="n">col</span><span class="p">,</span> <span class="n">image</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">row_images</span><span class="p">)):</span>
            <span class="n">canvas</span><span class="p">.</span><span class="n">paste</span><span class="p">(</span><span class="n">PIL</span><span class="p">.</span><span class="n">Image</span><span class="p">.</span><span class="n">fromarray</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="s">'RGB'</span><span class="p">),</span> <span class="p">((</span><span class="n">col</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">w</span><span class="p">,</span> <span class="p">(</span><span class="n">row</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">*</span> <span class="n">h</span><span class="p">))</span>
    <span class="n">canvas</span><span class="p">.</span><span class="n">save</span><span class="p">(</span><span class="n">png</span><span class="p">)</span>


<span class="k">def</span> <span class="nf">load_Gs</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">url</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">_Gs_cache</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">dnnlib</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="n">open_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">cache_dir</span><span class="o">=</span><span class="n">config</span><span class="p">.</span><span class="n">cache_dir</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">_G</span><span class="p">,</span> <span class="n">_D</span><span class="p">,</span> <span class="n">Gs</span> <span class="o">=</span> <span class="n">pickle</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="n">_Gs_cache</span><span class="p">[</span><span class="n">url</span><span class="p">]</span> <span class="o">=</span> <span class="n">Gs</span>
    <span class="k">return</span> <span class="n">_Gs_cache</span><span class="p">[</span><span class="n">url</span><span class="p">]</span>

<span class="n">url_ffhq</span> <span class="o">=</span> <span class="s">'https://drive.google.com/uc?id=1MEGjdvVpUsu1jB4zrXZN7Y4kBBOzizDQ'</span> <span class="c1"># karras2019stylegan-ffhq-1024x1024.pkl
</span><span class="n">_Gs_cache</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">()</span>
<span class="n">synthesis_kwargs</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">output_transform</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span><span class="n">func</span><span class="o">=</span><span class="n">tflib</span><span class="p">.</span><span class="n">convert_images_to_uint8</span><span class="p">,</span> <span class="n">nchw_to_nhwc</span><span class="o">=</span><span class="bp">True</span><span class="p">),</span> <span class="n">minibatch_size</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span>

</pre></div></div>

<p>上記のコードを実行したら続いて次の章のコード（draw_style_mixing_........）を実行する<br>
（draw_style_mixing_........）のコードは各自で自由に変更できるところがある</p>

<h2>
<span id="自由に変更できるところ" class="fragment"></span><a href="#%E8%87%AA%E7%94%B1%E3%81%AB%E5%A4%89%E6%9B%B4%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%A8%E3%81%93%E3%82%8D"><i class="fa fa-link"></i></a>自由に変更できるところ</h2>

<div class="code-frame" data-lang="python"><div class="highlight"><pre><span class="n">draw_style_mixing_figure</span><span class="p">(</span><span class="n">os</span><span class="p">.</span><span class="n">path</span><span class="p">.</span><span class="n">join</span><span class="p">(</span><span class="n">config</span><span class="p">.</span><span class="n">result_dir</span><span class="p">,</span> <span class="s">'figure03-style-mixing15.png'</span><span class="p">),</span> <span class="n">load_Gs</span><span class="p">(</span><span class="n">url_ffhq</span><span class="p">),</span>
                         <span class="n">w</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span> <span class="n">h</span><span class="o">=</span><span class="mi">1024</span><span class="p">,</span> <span class="n">src_seeds</span><span class="o">=</span><span class="p">[</span><span class="mi">3</span><span class="p">,</span><span class="mi">48</span><span class="p">,</span><span class="mi">6</span><span class="p">,</span><span class="mi">63</span><span class="p">,</span><span class="mi">13</span><span class="p">,</span><span class="mi">68</span><span class="p">],</span> <span class="n">dst_seeds</span><span class="o">=</span><span class="p">[</span><span class="mi">36</span><span class="p">,</span><span class="mi">18</span><span class="p">,</span><span class="mi">26</span><span class="p">,</span><span class="mi">29</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">84</span><span class="p">],</span>
                         <span class="n">style_ranges</span><span class="o">=</span><span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">)]</span><span class="o">*</span><span class="mi">3</span><span class="o">+</span><span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">8</span><span class="p">)]</span><span class="o">*</span><span class="mi">2</span><span class="o">+</span><span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">18</span><span class="p">)]</span><span class="o">*</span><span class="mi">1</span><span class="p">)</span>
</pre></div></div>

<h3>
<span id="src_seeds" class="fragment"></span><a href="#src_seeds"><i class="fa fa-link"></i></a>src_seeds</h3>

<p>Source（１行目の画像）を何にするか、数字はRandomStateを意味する</p>

<h3>
<span id="dst_seeds" class="fragment"></span><a href="#dst_seeds"><i class="fa fa-link"></i></a>dst_seeds</h3>

<p>Destination（１列目の画像）を何にするか</p>

<h3>
<span id="style_ranges" class="fragment"></span><a href="#style_ranges"><i class="fa fa-link"></i></a>style_ranges</h3>

<h4>
<span id="range--について" class="fragment"></span><a href="#range--%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6"><i class="fa fa-link"></i></a>range( , )について</h4>

<p>Gsのモデルアーキテクチャの一部は以下のようになっている</p>

<p><strong>1</strong>層目のconv: 解像度4×4、<strong>2</strong>層目のconv: 解像度4×4、<strong>3</strong>層目のconv: 解像度8×8、<strong>4</strong>層目のconv: 解像度8×8 <br>
<strong>5</strong>層目のconv: 解像度16×16、<strong>6</strong>層目のconv: 解像度16×16、<strong>7</strong>層目のconv: 解像度32×32、<br>
<strong>8</strong>層目のconv: 解像度32×32、<strong>9</strong>層目のconv: 解像度64×64、<strong>10</strong>層目のconv: 解像度64×64、<br>
<strong>11</strong>層目のconv: 解像度128×128、<strong>12</strong>層目のconv: 解像度128×128、<strong>13</strong>層目のconv: 解像度256×256、<br>
<strong>14</strong>層目のconv: 解像度256×256、 <strong>15</strong>層目のconv: 解像度512×512、<strong>16</strong>層目のconv: 解像度512×512<br>
<strong>17</strong>層目のconv: 解像度1024×1024、<strong>18</strong>層目のconv: 解像度1024×1024</p>

<p>・１層目から１８層目を３つのグループ（CoarseとMiddleとFine）に分けたい</p>

<p>・<strong>Coarse, Middle, Fineのそれぞれの範囲（何層目から何層目の解像度にするのか）をrange( , )を使って自由に指定することができる</strong></p>

<p>以下２つの例でどういうことかを確認してみる</p>

<h4>
<span id="例１-1" class="fragment"></span><a href="#%E4%BE%8B%EF%BC%91-1"><i class="fa fa-link"></i></a>例１</h4>

<p>Coarse：<strong>4×4~8×8</strong>, Middle:<strong>16×16~32×32</strong>, Fine:<strong>64×64~1024×1024</strong>と設定し、<br>
６枚の生成画像の内、<strong>３</strong>枚はSourceの低解像度(Coarse)スタイル、<strong>２</strong>枚はSourceの中間解像度(Middle)スタイル、<strong>１</strong>枚はSourceの高解像度(Fine)スタイルを使いたいときは以下のようなコードになる</p>

<div class="code-frame" data-lang="python"><div class="highlight"><pre><span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">4</span><span class="p">)]</span><span class="o">*</span><span class="mi">3</span><span class="o">+</span><span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">8</span><span class="p">)]</span><span class="o">*</span><span class="mi">2</span><span class="o">+</span><span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">8</span><span class="p">,</span><span class="mi">18</span><span class="p">)]</span><span class="o">*</span><span class="mi">1</span>
</pre></div></div>

<p>$range(0,4)$＝<strong>1</strong>層目から<strong>４</strong>層目（コードは0スタートのため1つずれている）＝4×4~8×8の解像度<br>
$range(4,8)$＝<strong>５</strong>層目から<strong>８</strong>層目＝16×16~32×32の解像度<br>
$range(8,18)$＝<strong>９</strong>層目から<strong>１８</strong>層目＝64×64~1024×1024の解像度</p>

<p>range(,)の後にある<strong>*3</strong>と<strong>*2</strong>と<strong>*1</strong>の値を自由に変更することで、Coarse, Middle, Fineの区切りを決めることができる</p>

<p>本章初めに添付したスタイルミックス画像はこの設定で生成されたもの</p>

<h4>
<span id="例２-1" class="fragment"></span><a href="#%E4%BE%8B%EF%BC%92-1"><i class="fa fa-link"></i></a>例２</h4>

<div class="code-frame" data-lang="python"><div class="highlight"><pre><span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">6</span><span class="p">)]</span><span class="o">*</span><span class="mi">1</span><span class="o">+</span><span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span><span class="mi">12</span><span class="p">)]</span><span class="o">*</span><span class="mi">3</span><span class="o">+</span><span class="p">[</span><span class="nb">range</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="mi">18</span><span class="p">)]</span><span class="o">*</span><span class="mi">2</span>
</pre></div></div>

<p>同じように考えると例２は<br>
Coarse：<strong>4×4~16×16</strong>, Middle:<strong>32×32~128×128</strong>, Fine:<strong>256×256~1024×1024</strong>とし、<br>
６枚の生成画像の内、<strong>１</strong>枚はSourceの低解像度(Coarse)スタイル、<strong>３</strong>枚はSourceの中間解像度(Middle)スタイル、<strong>２</strong>枚はSourceの高解像度(Fine)スタイルを使いたいときの設定である</p>

<p>例２の設定で生成したスタイルミックス画像は以下のようになる</p>

<p><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F097091e1-563d-5b6c-6c9c-75868f58d76c.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8602b10aa9b639929770465f0d60d322" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F097091e1-563d-5b6c-6c9c-75868f58d76c.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=8602b10aa9b639929770465f0d60d322" alt="image.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/315063/097091e1-563d-5b6c-6c9c-75868f58d76c.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F097091e1-563d-5b6c-6c9c-75868f58d76c.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=78a675e0d644807d464a2391b74906e8 1x" loading="lazy"></a></p>

<p>range( , )を変更することで解像度の範囲を変えられることを示したが、<strong>個人的にはデフォルト通りの<br>
Coarse：4×4~8×8, Middle:16×16~32×32, Fine:64×64~1024×1024を推奨する</strong></p>

<p>実際に各解像度の画像を見ると、4×4~8×8はかなりぼやけていて、16×16~32×32になるとぼやけてはいるがどういう顔なのか大まかにわかる、64×64~1024×1024になるとぼやけのない鮮明な画像であることが確認できる</p>

<p>そのためこの分け方(Coarse：4×4~8×8, Middle:16×16~32×32, Fine:64×64~1024×1024)が一番自然だと思う</p>

<hr>

<p>画像表示とダウンロードをしたいときは上述の⑥「Google Colaboratory上で生成画像を表示してみる」と「⑦画像をダウンロードする」の章で記載したコードをそのまま使える</p>

<p>ただし、画像ファイルの名前を変えた場合はパス（例："results/example200"）を変更する必要がある</p>

<h1>
<span id="他のデータセットで学習されたモデルを使って画像生成してみる" class="fragment"></span><a href="#%E4%BB%96%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E3%82%BB%E3%83%83%E3%83%88%E3%81%A7%E5%AD%A6%E7%BF%92%E3%81%95%E3%82%8C%E3%81%9F%E3%83%A2%E3%83%87%E3%83%AB%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E7%94%BB%E5%83%8F%E7%94%9F%E6%88%90%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B"><i class="fa fa-link"></i></a>他のデータセットで学習されたモデルを使って画像生成してみる</h1>

<p>・これまで添付した画像はFFHQデータセットで学習したgeneratorが生成した顔画像</p>

<p>・<strong>「②generatorをロードする」の章で紹介したコードの中の「url=.....」の部分だけを変えることで他の画像を生成できる</strong></p>

<p>・urlを変えたら、それ以降は前述した顔画像生成と同じコードを順番に実行する</p>

<p>・下図はすべて実際にurlだけを変えて生成してみた画像</p>

<hr>

<h3>
<span id="celebahqデータセットで学習されたモデルを使いたい場合" class="fragment"></span><a href="#celebahq%E3%83%87%E3%83%BC%E3%82%BF%E3%82%BB%E3%83%83%E3%83%88%E3%81%A7%E5%AD%A6%E7%BF%92%E3%81%95%E3%82%8C%E3%81%9F%E3%83%A2%E3%83%87%E3%83%AB%E3%82%92%E4%BD%BF%E3%81%84%E3%81%9F%E3%81%84%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>celebAHQデータセットで学習されたモデルを使いたい場合</h3>

<p><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fe916585a-c9cc-0864-2727-51e9f73c3868.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5b16e1258bc61b6b34d791931ca03f2c" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fe916585a-c9cc-0864-2727-51e9f73c3868.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5b16e1258bc61b6b34d791931ca03f2c" alt="celeb30.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/315063/e916585a-c9cc-0864-2727-51e9f73c3868.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fe916585a-c9cc-0864-2727-51e9f73c3868.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=4ebfce90eed663d7f25742054972bc8c 1x" loading="lazy"></a><br>
RandomState(30)</p>

<div class="code-frame" data-lang="python"><div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">pickle</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="n">np</span>
<span class="kn">import</span> <span class="nn">PIL.Image</span>
<span class="kn">import</span> <span class="nn">dnnlib</span>
<span class="kn">import</span> <span class="nn">dnnlib.tflib</span> <span class="k">as</span> <span class="n">tflib</span>
<span class="kn">import</span> <span class="nn">config</span>

<span class="c1"># Initialize TensorFlow.
</span><span class="n">tflib</span><span class="p">.</span><span class="n">init_tf</span><span class="p">()</span>
<span class="c1"># Load pre-trained network.
</span><span class="n">url</span> <span class="o">=</span> <span class="s">'https://drive.google.com/uc?id=1MGqJl28pN4t7SAtSrPdSRJSQJqahkzUf'</span> <span class="c1"># karras2019stylegan-celebahq-1024x1024.pkl
</span><span class="k">with</span> <span class="n">dnnlib</span><span class="p">.</span><span class="n">util</span><span class="p">.</span><span class="n">open_url</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">cache_dir</span><span class="o">=</span><span class="n">config</span><span class="p">.</span><span class="n">cache_dir</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">_G</span><span class="p">,</span> <span class="n">_D</span><span class="p">,</span> <span class="n">Gs</span> <span class="o">=</span> <span class="n">pickle</span><span class="p">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
</pre></div></div>

<p>urlだけが変わって、それ以外は全く同じであることが確認できると思う</p>

<h2>
<span id="顔以外の画像も生成したい場合" class="fragment"></span><a href="#%E9%A1%94%E4%BB%A5%E5%A4%96%E3%81%AE%E7%94%BB%E5%83%8F%E3%82%82%E7%94%9F%E6%88%90%E3%81%97%E3%81%9F%E3%81%84%E5%A0%B4%E5%90%88"><i class="fa fa-link"></i></a>顔以外の画像も生成したい場合</h2>

<p>ベッドルーム・車・猫の画像を生成したいときもurlを変更するだけ</p>

<h3>
<span id="ベッドルーム画像" class="fragment"></span><a href="#%E3%83%99%E3%83%83%E3%83%89%E3%83%AB%E3%83%BC%E3%83%A0%E7%94%BB%E5%83%8F"><i class="fa fa-link"></i></a>ベッドルーム画像</h3>

<p><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fca2ddc13-da4b-8b5d-f67d-abba39438806.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5f9779140521bb490fd698faea67a9e3" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fca2ddc13-da4b-8b5d-f67d-abba39438806.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=5f9779140521bb490fd698faea67a9e3" alt="bed32.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/315063/ca2ddc13-da4b-8b5d-f67d-abba39438806.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fca2ddc13-da4b-8b5d-f67d-abba39438806.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=a05e7afde90c619a479dc3979045ebd4 1x" loading="lazy"></a><br>
RandomState(32)</p>

<div class="code-frame" data-lang="python"><div class="highlight"><pre>
<span class="n">url</span> <span class="o">=</span> <span class="s">'https://drive.google.com/uc?id=1MOSKeGF0FJcivpBI7s63V9YHloUTORiF'</span> <span class="c1"># karras2019stylegan-bedrooms-256x256.pkl
</span></pre></div></div>

<h3>
<span id="車画像" class="fragment"></span><a href="#%E8%BB%8A%E7%94%BB%E5%83%8F"><i class="fa fa-link"></i></a>車画像</h3>

<p><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F3b4f52a9-0f76-7965-f77d-41afcec2b45d.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=00ca16504b424cb90e31fc5b03be5c50" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F3b4f52a9-0f76-7965-f77d-41afcec2b45d.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=00ca16504b424cb90e31fc5b03be5c50" alt="car41.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/315063/3b4f52a9-0f76-7965-f77d-41afcec2b45d.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F3b4f52a9-0f76-7965-f77d-41afcec2b45d.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=7c5a3b12a66eaf261eb2ee9aa91ad75b 1x" loading="lazy"></a></p>

<p>RandomState(41)</p>

<div class="code-frame" data-lang="python"><div class="highlight"><pre><span class="n">url</span> <span class="o">=</span> <span class="s">'https://drive.google.com/uc?id=1MJ6iCfNtMIRicihwRorsM3b7mmtmK9c3'</span> <span class="c1"># karras2019stylegan-cars-512x384.pkl
</span></pre></div></div>

<h3>
<span id="猫画像" class="fragment"></span><a href="#%E7%8C%AB%E7%94%BB%E5%83%8F"><i class="fa fa-link"></i></a>猫画像</h3>

<p><a href="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F4eeba615-53a7-4ee8-255a-9b9f532a8eaf.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=abc3da720f671d324852d73e544fd817" target="_blank" rel="nofollow noopener"><img src="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F4eeba615-53a7-4ee8-255a-9b9f532a8eaf.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;s=abc3da720f671d324852d73e544fd817" alt="cat35.png" data-canonical-src="https://qiita-image-store.s3.amazonaws.com/0/315063/4eeba615-53a7-4ee8-255a-9b9f532a8eaf.png" srcset="https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F4eeba615-53a7-4ee8-255a-9b9f532a8eaf.png?ixlib=rb-1.2.2&amp;auto=format&amp;gif-q=60&amp;q=75&amp;w=1400&amp;fit=max&amp;s=b8927a34e5c8be710a653649cebe869e 1x" loading="lazy"></a></p>

<p>RandomState(35)</p>

<div class="code-frame" data-lang="python"><div class="highlight"><pre><span class="n">url</span> <span class="o">=</span> <span class="s">'https://drive.google.com/uc?id=1MQywl0FNt6lHu8E_EUqnRbviagS7fbiJ'</span> <span class="c1"># karras2019stylegan-cats-256x256.pkl
</span></pre></div></div>

<h1>
<span id="まとめ感想" class="fragment"></span><a href="#%E3%81%BE%E3%81%A8%E3%82%81%E6%84%9F%E6%83%B3"><i class="fa fa-link"></i></a>まとめ・感想</h1>

<p>・StyleGANを１から訓練するのは大変だと思うが、学習済みのモデルを使えばGANの学習に伴う難しいことを考えずに画像を生成することができる</p>

<p>・実際にコードを動かしてみると、論文を読むだけでは気づくことができないことも発見できる<br>
例えば、ハイパーパラメータがどのように生成画像に影響を与えるのかは自分で生成してみることで初めて実感できる</p>

<h1>
<span id="コード" class="fragment"></span><a href="#%E3%82%B3%E3%83%BC%E3%83%89"><i class="fa fa-link"></i></a>コード</h1>

<p><a href="https://github.com/NVlabs/stylegan" class="autolink" rel="nofollow noopener" target="_blank">https://github.com/NVlabs/stylegan</a></p>
</div></div></section><div class="it-Footer"><div class="it-Footer_actions"><div class="it-Footer_editRequest"><a href="/drafts/12d21916de56d125f0be/edit" class="u-link-no-underline"><span>編集リクエスト</span></a></div><div class="it-Footer_stock"><button><svg size="16" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 353.02 398" class="StockIcon__Stock-cq5opj-0 fEysOa"><path d="M176.72 398c-67.52 0-130.16-29-171.84-79.69l-4.46-5.42V78.05H353v234.84l-4.45 5.42C306.88 369 244.24 398 176.72 398zm-137.2-99.34c34.17 38.37 83.78 60.25 137.2 60.25s103-21.88 137.21-60.25V117.14H39.52zM0 0h351.12v40.94H0z"></path></svg><span class="it-Footer_stockLabel">ストック</span></button></div><div class="it-Footer_like" title="Looks Good To Me!"><button style="background-color:#fff"><span style="width:100%;height:100%;display:flex;align-items:center;justify-content:center"><svg size="56" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 564.81 145.68" color="#55C500" class="LgtmIcon__Lgtm-sc-1e4ee48-0 ZHnTl"><path d="M0 3.85h38.39v106.5h64.16v32H0zM195.41 66.82h71.82q.91 17.84-4 32.35A68.89 68.89 0 01248.71 124a65.49 65.49 0 01-22.9 16 74.08 74.08 0 01-29.17 5.65 78.16 78.16 0 01-54.17-21.32 74.1 74.1 0 01-16.42-23.21 68.08 68.08 0 01-6-28.41 67.7 67.7 0 016-28.42 74.44 74.44 0 0116.42-23.1 76.37 76.37 0 0124.32-15.52 78.92 78.92 0 0184.43 16.06l-25 25A36.52 36.52 0 00213.57 36a37.65 37.65 0 00-31.83-.87 37.7 37.7 0 00-12.08 8.57 40.75 40.75 0 00-8.17 12.91 42.8 42.8 0 00-3 16.22 42.91 42.91 0 003 16.17 40.44 40.44 0 008.17 13 37.4 37.4 0 0012.08 8.57 36.07 36.07 0 0014.9 3.11q14.38 0 22.13-5.35a25.46 25.46 0 0010.31-14.65h-33.77zM319.44 36.21h-36.55v-32h111.18v32h-36.45v106.5h-38.18zM486.82 109l-29.73-44.18v77.89H418.7V4.24h33.83l39 55.09 39.86-55.09h33.42v138.47h-38.38V65.23L496.19 109z"></path></svg></span></button><a href="/Phoeboooo/items/12d21916de56d125f0be/likers" class="it-Footer_likeCount">108</a></div></div><div class="it-Footer_social"><div class="it-Footer_shareButton it-Footer_shareButton-twitter"><span class="fa fa-twitter"></span></div><div class="it-Footer_shareButton it-Footer_shareButton-facebook"><span class="fa fa-facebook"></span></div></div></div><div class="ai-Container"><div class="ai-User"><a href="/Phoeboooo"><img src="https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fprofile-images%2F1542036351?ixlib=rb-1.2.2&amp;auto=compress%2Cformat&amp;lossless=0&amp;w=75&amp;s=db21db6bf61fa852966878827d97fcd6" alt="Phoeboooo" class="ai-User_image"/></a><div class="ai-User_body"><div class="ai-User_header"><a href="/Phoeboooo" class="ai-User_name"></a><a href="/Phoeboooo" class="ai-User_urlname">@<!-- -->Phoeboooo</a></div><div class="ai-User_description">何となく思ったことを公開中。
24/7暇人なので、お気軽にご連絡ください。

JDLA Deep Learning for /ENGINEER 2019 #1/
GENERAL 2019 #1/ TOEIC965</div><div class="ai-User_footer"><button class="UserFollowButton-sc-1hmm0rc-0 iytOeR">フォロー</button></div></div></div></div></div></div><div class="p-items_options"><div class="mt-2"></div></div><div class="p-items_toc"><div class="mt-2"></div></div></div></div><div class="p-items_wrapper p-items_wrapper-white"><div class="p-items_container"><div class="p-items_leftDummy"></div><div class="p-items_main"><div class="p-items_aside px-5 p-2@s"><div id="logly-lift-4279494"><div class="tl-DummyItemList p-2"><div class="tl-DummyItemList_content tl-DummyItem"><div class="tl-DummyItem_image mr-1"></div><div class="tl-DummyItem_body"><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div></div></div><div class="tl-DummyItemList_content tl-DummyItem"><div class="tl-DummyItem_image mr-1"></div><div class="tl-DummyItem_body"><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div></div></div><div class="tl-DummyItemList_content tl-DummyItem"><div class="tl-DummyItem_image mr-1"></div><div class="tl-DummyItem_body"><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div></div></div><div class="tl-DummyItemList_content tl-DummyItem"><div class="tl-DummyItem_image mr-1"></div><div class="tl-DummyItem_body"><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div></div></div><div class="tl-DummyItemList_content tl-DummyItem"><div class="tl-DummyItem_image mr-1"></div><div class="tl-DummyItem_body"><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div><div class="tl-DummyItem_text mb-1"></div></div></div></div></div></div><div class="p-items_aside mt-5 px-5 p-2@s"></div><div></div><div class="p-items_aside mt-6 px-5 p-2@s" id="comments-wrapper"><div id="comments" class="co-ItemWrapper"><div class="co-ItemWrapper_title mb-2"><span class="fa fa-comments mr-1"></span>コメント</div><div class="mb-4">この記事にコメントはありません。</div><div style="margin-top:30px"><div><div><div class="CommentForm__Header-xcwl8q-0 gnNGXY"><img src="https://qiita-user-profile-images.imgix.net/https%3A%2F%2Flh6.googleusercontent.com%2F-3EHSHCCSCmg%2FAAAAAAAAAAI%2FAAAAAAAAAAA%2FAKF05nAVp3wix0GPOS2jqZ7xSDRYCDF6Mw%2Fs50%2Fphoto.jpg?ixlib=rb-1.2.2&amp;auto=compress%2Cformat&amp;lossless=0&amp;w=48&amp;s=be4e5cacc9e0864ac1ef96d37914a7b9" width="36" height="36" class="Avatar__Image-sc-1u4xwgc-0 hGIfZz"/><span class="CommentForm__HeaderTitle-xcwl8q-1 eZJAwV">コメントを投稿する</span></div><div class="CommentForm__ContentHeader-xcwl8q-2 fZEEYf"><div class="CommentForm__ContentHeaderTabs-xcwl8q-3 lnidcq"><div class="CommentForm__ContentHeaderTabsItem-xcwl8q-4 esvsAC">編集</div><div class="CommentForm__ContentHeaderTabsItem-xcwl8q-4 joOXXL">プレビュー</div></div><div class="CommentForm__ContentHeaderToolbar-xcwl8q-5 jkYbvp"><a href="https://qiita.com/Qiita/items/c686397e4a0f4f11683d" target="_blank" title="Markdownの書き方" class="CommentForm__ContentHeaderToolbarLink-xcwl8q-7 QXFlv"><span class="fa fa-question-circle fa-lg"></span></a><div title="絵文字を選択" class="CommentForm__ContentHeaderToolbarItem-xcwl8q-6 eYFchP"><span class="fa fa-smile-o fa-lg"></span></div></div></div><div class="CommentForm__Body-xcwl8q-10 dkpzIG"><textarea placeholder="コメントを入力" class="CommentForm__CommentFormTextarea-xcwl8q-12 fEfHfr"></textarea><div style="display:none;margin-bottom:0" class="CommentForm__BodyPreview-xcwl8q-11 drBRWd co-Item_text"><div></div></div></div><div class="CommentForm__Footer-xcwl8q-13 XemJY"><div class="CommentForm__Uploader-xcwl8q-14 hEjQqy"><span class="CommentForm__UploaderButton-xcwl8q-15 hZWjpt"><i class="fa fa-picture-o"></i>画像を選択</span><span title="アップロード可能なサイズ" class="CommentForm__UploaderText-xcwl8q-16 bMzayN">0B / 100MB</span></div><button style="margin-left:auto" class="Button-sc-998iob-0 hEwpMS" color="primary">投稿</button></div><input type="file" style="display:none"/></div></div></div></div></div></div><div class="p-items_rightDummy"></div></div></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="PersonalArticle" data-dom-id="PersonalArticle-react-component-78dc4751-fcbb-49e5-8f57-26398b84e275">{"article":{"body":"\u003cp\u003e実際に生成してみた画像\u003cbr\u003e\n\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F499fcac7-2f62-1246-8c6c-1cee87d24be5.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=552a85f6b5c35a8525118cdce5419d46\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F499fcac7-2f62-1246-8c6c-1cee87d24be5.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=552a85f6b5c35a8525118cdce5419d46\" alt=\"s_stylegan2.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/315063/499fcac7-2f62-1246-8c6c-1cee87d24be5.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F499fcac7-2f62-1246-8c6c-1cee87d24be5.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=19e02ceca58d4703219f1165cb4533a7 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"本記事について\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%9C%AC%E8%A8%98%E4%BA%8B%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e本記事について\u003c/h1\u003e\n\n\u003cp\u003e・\u003cstrong\u003eGoogle Colaboratoryで学習済みのStyleGAN\u003c/strong\u003eを使って、冒頭のような顔画像・スタイルミックスした画像・ベッドルーム・車・猫の画像を生成してみた\u003c/p\u003e\n\n\u003cp\u003e・\u003cstrong\u003eStyleGANのGitHubの説明通りに行うことで学習済みモデルを使える\u003c/strong\u003e\u003cbr\u003e\n・本記事で記載するコードはその説明通りのもののため、コピペすれば同じように画像生成ができると思う\u003c/p\u003e\n\n\u003cp\u003e・\u003cstrong\u003e本記事にある画像はすべて実際に学習済みのStyleGANを使って生成した画像\u003c/strong\u003eである\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"画像生成\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%94%BB%E5%83%8F%E7%94%9F%E6%88%90\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e画像生成\u003c/h1\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"準備\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%BA%96%E5%82%99\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e①準備\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\n\u003cspan class=\"c1\"\u003e#git clone でStyleGANのコードを使えるようにする\n\u003c/span\u003e\u003cspan class=\"err\"\u003e!\u003c/span\u003e\u003cspan class=\"n\"\u003egit\u003c/span\u003e \u003cspan class=\"n\"\u003eclone\u003c/span\u003e \u003cspan class=\"n\"\u003ehttps\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\u003cspan class=\"o\"\u003e//\u003c/span\u003e\u003cspan class=\"n\"\u003egithub\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecom\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003eNVlabs\u003c/span\u003e\u003cspan class=\"o\"\u003e/\u003c/span\u003e\u003cspan class=\"n\"\u003estylegan\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003egit\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e#ディレクトリ移動\n\u003c/span\u003e\u003cspan class=\"n\"\u003ecd\u003c/span\u003e \u003cspan class=\"n\"\u003estylegan\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"generatorをロードする\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#generator%E3%82%92%E3%83%AD%E3%83%BC%E3%83%89%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e②generatorをロードする\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003eos\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003epickle\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003enumpy\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003ePIL.Image\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003ednnlib\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003ednnlib.tflib\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003etflib\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003econfig\u003c/span\u003e\n\n\n\u003cspan class=\"c1\"\u003e# Initialize TensorFlow.\n\u003c/span\u003e\u003cspan class=\"n\"\u003etflib\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003einit_tf\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# Load pre-trained network.\n\u003c/span\u003e\u003cspan class=\"n\"\u003eurl\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e'https://drive.google.com/uc?id=1MEGjdvVpUsu1jB4zrXZN7Y4kBBOzizDQ'\u003c/span\u003e \u003cspan class=\"c1\"\u003e# karras2019stylegan-ffhq-1024x1024.pkl\n\u003c/span\u003e\u003cspan class=\"k\"\u003ewith\u003c/span\u003e \u003cspan class=\"n\"\u003ednnlib\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eutil\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eopen_url\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eurl\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ecache_dir\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003econfig\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecache_dir\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003ef\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_G\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_D\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eGs\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epickle\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eload\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ef\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"c1\"\u003e# _G = Instantaneous snapshot of the generator. Mainly useful for resuming a previous training run.\n\u003c/span\u003e    \u003cspan class=\"c1\"\u003e# _D = Instantaneous snapshot of the discriminator. Mainly useful for resuming a previous training run.\n\u003c/span\u003e    \u003cspan class=\"c1\"\u003e# Gs = Long-term average of the generator. Yields higher-quality results than the instantaneous snapshot.\n\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e_G, _D, Gsの３つをロードできるが、使うのはGsのみ\u003c/p\u003e\n\n\u003cp\u003e_G, _Dに関しては無視で大丈夫\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"潜在ベクトルを選ぶ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%BD%9C%E5%9C%A8%E3%83%99%E3%82%AF%E3%83%88%E3%83%AB%E3%82%92%E9%81%B8%E3%81%B6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e③潜在ベクトルを選ぶ\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"c1\"\u003e# Pick latent vector.\n\u003c/span\u003e\u003cspan class=\"n\"\u003ernd\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erandom\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRandomState\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e200\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003elatents\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ernd\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erandn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eGs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003einput_shape\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e潜在ベクトルを選ぶ上で設定するRandomStateの値（上記のコードでは200）を変えることで、異なる画像を生成することができる\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"画像生成-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%94%BB%E5%83%8F%E7%94%9F%E6%88%90-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e④画像生成\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"c1\"\u003e# Generate image.\n\u003c/span\u003e\u003cspan class=\"n\"\u003efmt\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003edict\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efunc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003etflib\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003econvert_images_to_uint8\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003enchw_to_nhwc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eimages\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eGs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erun\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003elatents\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003etruncation_psi\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mf\"\u003e0.7\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003erandomize_noise\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eoutput_transform\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003efmt\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003etruncation_psiの値(上記のコードでは0.7）を変えると、画像の雰囲気を少し変えることができる\u003cbr\u003e\n0にすると本物画像を平均した顔、-1~1の間で調整するのが良い（後述）\u003c/p\u003e\n\n\u003cp\u003e冒頭の顔画像はすべてtruncation_psi=0.7で生成されたもの\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"生成画像を保存する\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%94%9F%E6%88%90%E7%94%BB%E5%83%8F%E3%82%92%E4%BF%9D%E5%AD%98%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e⑤生成画像を保存する\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"c1\"\u003e# Save image.\n\u003c/span\u003e\u003cspan class=\"n\"\u003eos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emakedirs\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003econfig\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eresult_dir\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eexist_ok\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003epng_filename\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ejoin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003econfig\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eresult_dir\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e'example200.png'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003ePIL\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eImage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003efromarray\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eimages\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e \u003cspan class=\"s\"\u003e'RGB'\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"n\"\u003esave\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epng_filename\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e'example200'のところは自由に画像ファイルの名前を設定する\u003cbr\u003e\nその他はそのまま実行する\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"google-colaboratory上で生成画像を表示してみる\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#google-colaboratory%E4%B8%8A%E3%81%A7%E7%94%9F%E6%88%90%E7%94%BB%E5%83%8F%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e⑥Google Colaboratory上で生成画像を表示してみる\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003ePIL\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003eImage\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003ematplotlib.pyplot\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003enumpy\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e#画像内に線を表示しない\n\u003c/span\u003e\u003cspan class=\"n\"\u003efig\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eax\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esubplots\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"n\"\u003eax\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etick_params\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003elabelbottom\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"off\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003ebottom\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"off\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eax\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003etick_params\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003elabelleft\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"off\"\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"n\"\u003eleft\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"s\"\u003e\"off\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"n\"\u003eax\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eset_xticklabels\u003c/span\u003e\u003cspan class=\"p\"\u003e([])\u003c/span\u003e \n\u003cspan class=\"n\"\u003eax\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eaxis\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'off'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#画像の読み込み\n\u003c/span\u003e\u003cspan class=\"n\"\u003eim\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eImage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"nb\"\u003eopen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"results/example200.png\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#画像をarrayに変換\n\u003c/span\u003e\u003cspan class=\"n\"\u003eim_list\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003easarray\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eim\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#貼り付け\n\u003c/span\u003e\u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eimshow\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eim_list\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e#表示\n\u003c/span\u003e\u003cspan class=\"n\"\u003eplt\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eshow\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eRandamState(200)で画像を生成した場合（上記のコードをそのまま実行した場合）、下の画像が生成されるはず\u003cbr\u003e\n\"results/自分が設定したファイル名\"（この例では\"results/example200.png\"）に先ほど生成した画像がある\u003cbr\u003e\n\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F19640af4-9ccb-f588-f654-e1ec7ae06f26.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ac0f6dcdbfba2da6b28ce02570170ba2\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F19640af4-9ccb-f588-f654-e1ec7ae06f26.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=ac0f6dcdbfba2da6b28ce02570170ba2\" alt=\"example200.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/315063/19640af4-9ccb-f588-f654-e1ec7ae06f26.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F19640af4-9ccb-f588-f654-e1ec7ae06f26.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=69a605769420eddfaee8f00837255e1a 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"画像をダウンロードする\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%94%BB%E5%83%8F%E3%82%92%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89%E3%81%99%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e⑦画像をダウンロードする\u003c/h3\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\n\u003cspan class=\"kn\"\u003efrom\u003c/span\u003e \u003cspan class=\"nn\"\u003egoogle.colab\u003c/span\u003e \u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"n\"\u003efiles\u003c/span\u003e\n\u003cspan class=\"n\"\u003efiles\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003edownload\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e\"results/example200.png\"\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e・画像をダウンロードするときも画像を見るときと同じように(\"results/自分が設定したファイル名\")とする\u003c/p\u003e\n\n\u003cp\u003e・生成画像をダウンロードしようとしてエラーメッセージ「Connection reset by peer」が出たときは、\u003cbr\u003e\nGoogle Colaboratoryのランタイムから「すべてのランタイムをリセット」をしてからもう一度実行するとできると思う\u003c/p\u003e\n\n\u003cp\u003e・ダウンロードした生成画像の容量は大きいため、用途によってはリサイズする必要があるかもしれない\u003cbr\u003e\n下記のようなサイトで画像縮小を行うことができる\u003cbr\u003e\n\u003ca href=\"https://resizer.myct.jp/\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://resizer.myct.jp/\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"ハイパーパラメータを変えてみる\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%8F%E3%82%A4%E3%83%91%E3%83%BC%E3%83%91%E3%83%A9%E3%83%A1%E3%83%BC%E3%82%BF%E3%82%92%E5%A4%89%E3%81%88%E3%81%A6%E3%81%BF%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eハイパーパラメータを変えてみる\u003c/h1\u003e\n\n\u003cp\u003e以下２つのハイパーパラメータを変えることで様々な種類・見た目の画像が生成できる\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"潜在変数\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E6%BD%9C%E5%9C%A8%E5%A4%89%E6%95%B0\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e潜在変数\u003c/h2\u003e\n\n\u003cp\u003e前述のようにRandomStateの値を変えることで様々な画像を生成できる\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"randomstate841の場合\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#randomstate841%E3%81%AE%E5%A0%B4%E5%90%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eRandomState(841)の場合\u003c/h3\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F5714378a-3fd1-8132-d684-52c91f749ba8.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=5835f8c9224c6a3d7be0f1f4af6e39e8\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F5714378a-3fd1-8132-d684-52c91f749ba8.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=5835f8c9224c6a3d7be0f1f4af6e39e8\" alt=\"exa841.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/315063/5714378a-3fd1-8132-d684-52c91f749ba8.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F5714378a-3fd1-8132-d684-52c91f749ba8.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=667bfe387ed731d2ad81afafc065ce7e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"randomstate231の場合\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#randomstate231%E3%81%AE%E5%A0%B4%E5%90%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eRandomState(231)の場合\u003c/h3\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fccaca6ab-ddab-ba8d-442d-d9f927367726.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7d3a50b2a07aa0426c09debeec29b8b5\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fccaca6ab-ddab-ba8d-442d-d9f927367726.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7d3a50b2a07aa0426c09debeec29b8b5\" alt=\"exa231.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/315063/ccaca6ab-ddab-ba8d-442d-d9f927367726.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fccaca6ab-ddab-ba8d-442d-d9f927367726.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=af33daeb05519bd13640a4a8d33bf5b7 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"truncation_psi\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#truncation_psi\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003etruncation_psi\u003c/h2\u003e\n\n\u003cp\u003etruncation_psiを変えると、画像の雰囲気を変えることができる\u003c/p\u003e\n\n\u003cp\u003etruncation trick（どのあたりの潜在変数をとるかを選ぶ）は低解像度（4×4~32×32）のスタイルのみに適用されるため、人の特徴を変化させるはたらきがある\u003c/p\u003e\n\n\u003cp\u003e実際に生成してみた以下２つの例では、性別・髪の色・髪型・眼鏡の有無などが変わっている\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"例１\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BE%8B%EF%BC%91\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e例１\u003c/h3\u003e\n\n\u003cp\u003e下のGIFはtruncatoin_psiを実際に-1→-0.7→-0.5→-0.2→0→0.2→0.5→0.7→1と変えて生成した画像\u003c/p\u003e\n\n\u003cp\u003eRandomState(29)\u003cbr\u003e\n\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F582ab6c5-eba1-9a09-6e78-f9880fddcf0d.gif?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f8e6442a487a6091f61746ebf11ee88e\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F582ab6c5-eba1-9a09-6e78-f9880fddcf0d.gif?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=f8e6442a487a6091f61746ebf11ee88e\" alt=\"stylegan.gif1.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/315063/582ab6c5-eba1-9a09-6e78-f9880fddcf0d.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F582ab6c5-eba1-9a09-6e78-f9880fddcf0d.gif?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=40b8c2e5172712d5ca6a133a42aa40cc 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fc37cae05-50f8-eba6-87b1-151363c05a25.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=58ec105c923450d480c059c286fe2c99\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fc37cae05-50f8-eba6-87b1-151363c05a25.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=58ec105c923450d480c059c286fe2c99\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/315063/c37cae05-50f8-eba6-87b1-151363c05a25.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fc37cae05-50f8-eba6-87b1-151363c05a25.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=ee5504866f1e022c018705436e9afecf 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"例２\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BE%8B%EF%BC%92\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e例２\u003c/h3\u003e\n\n\u003cp\u003eRandomState(36)\u003cbr\u003e\n\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F3d06c819-7440-6286-6285-2349d3438a52.gif?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=9c414a4eef6e64224df6142b1b111cd1\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F3d06c819-7440-6286-6285-2349d3438a52.gif?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=9c414a4eef6e64224df6142b1b111cd1\" alt=\"15538261262W1EZIoIXFo8dSD1553826124.gif\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/315063/3d06c819-7440-6286-6285-2349d3438a52.gif\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F3d06c819-7440-6286-6285-2349d3438a52.gif?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=780553e9444819c3da828139734a8219 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\n\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fbfddc032-6fde-d94a-b1d1-84d285af04cc.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7845d6a9b92cdd19959585d1598de590\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fbfddc032-6fde-d94a-b1d1-84d285af04cc.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=7845d6a9b92cdd19959585d1598de590\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/315063/bfddc032-6fde-d94a-b1d1-84d285af04cc.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fbfddc032-6fde-d94a-b1d1-84d285af04cc.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=9083de69120162b1ce25ee741d13b704 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"イメージ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eイメージ\u003c/h3\u003e\n\n\u003cp\u003e\u003cstrong\u003etruncation_psi=0のとき\u003c/strong\u003e、生成される画像は本物画像（学習に使った画像のデータセット）を平均した顔\u003cbr\u003e\n＝\u003cstrong\u003e本物画像通りの画像が生成されるため、画像の質は高いがオリジナリティはない\u003c/strong\u003e\u003cbr\u003e\n潜在変数を変えてもtruncation_psi=0にすると同じ女性の画像（背景は異なる）が生成される\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003etruncation_psiを少し変えると（-1~1）\u003c/strong\u003e本物画像から少し離れることになるため、本物画像の要素を残しながら\u003cstrong\u003eオリジナリティが加わった画像\u003c/strong\u003eができる\u003c/p\u003e\n\n\u003cp\u003eただ、3などに設定すると本物画像から離れすぎて変な画像になってしまう　\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F1174051a-ae9d-c7e0-d1ae-5f07f1ce2644.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=5dccbacf15885ae69f4d03e84dd86a12\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F1174051a-ae9d-c7e0-d1ae-5f07f1ce2644.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=5dccbacf15885ae69f4d03e84dd86a12\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/315063/1174051a-ae9d-c7e0-d1ae-5f07f1ce2644.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F1174051a-ae9d-c7e0-d1ae-5f07f1ce2644.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=620d148063b2bf1fcffeedc3e9255b63 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"スタイルミックス\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB%E3%83%9F%E3%83%83%E3%82%AF%E3%82%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eスタイルミックス\u003c/h1\u003e\n\n\u003cp\u003e実際に生成してみた画像\u003cbr\u003e\ncoarse(4×4~8×8):3枚, middle(16×16~32×32):2枚, fine(64×64~1024×1024):1枚（下記詳細）\u003cbr\u003e\n黄線と黒線は区切りを明確にするために画像生成後に付け足したもの\u003cbr\u003e\n\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fc5981257-6757-f731-ff24-e8816d8c4636.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=0180cfa8bdeb1e64ccd03f7f4cc99d40\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fc5981257-6757-f731-ff24-e8816d8c4636.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=0180cfa8bdeb1e64ccd03f7f4cc99d40\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/315063/c5981257-6757-f731-ff24-e8816d8c4636.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fc5981257-6757-f731-ff24-e8816d8c4636.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=a87f4cbb809eda81172c152ec13d5b98 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"スタイルミックス画像の見方\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB%E3%83%9F%E3%83%83%E3%82%AF%E3%82%B9%E7%94%BB%E5%83%8F%E3%81%AE%E8%A6%8B%E6%96%B9\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eスタイルミックス画像の見方\u003c/h2\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F0a5dfaed-b7e8-c084-9f2f-d423fb351a9b.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=d7ee00a9f01160ffbb292ae1e70f9f16\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F0a5dfaed-b7e8-c084-9f2f-d423fb351a9b.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=d7ee00a9f01160ffbb292ae1e70f9f16\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/315063/0a5dfaed-b7e8-c084-9f2f-d423fb351a9b.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F0a5dfaed-b7e8-c084-9f2f-d423fb351a9b.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=d1cfe0d0ccd08cf94e908203970f4a94 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003eDestinationの画像（１列目）にSourceの画像（１行目）のスタイル（CoarseかMiddleかFine）をコピーして合わせる\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e・\u003cstrong\u003eCoarse styles\u003c/strong\u003e : 低解像度（例：4×4~8×8）のスタイル \u003cbr\u003e\nイメージ）ぼやけた画像見たときに捉えられる特徴（顔の向き・輪郭・眼鏡）\u003c/p\u003e\n\n\u003cp\u003e・\u003cstrong\u003eMiddle styles\u003c/strong\u003e：中間解像度（例：16×16~32×32）のスタイル\u003cbr\u003e\nイメージ）顔にズームインしたときに捉えられる特徴（顔のパーツの特徴）\u003c/p\u003e\n\n\u003cp\u003e・\u003cstrong\u003eFine styles\u003c/strong\u003e : 高解像度（例：64×64~1024×1024）のスタイル\u003cbr\u003e\nイメージ）ピクセルレベルで画像を見たときに捉えられる特徴（背景の色や髪の毛の色）\u003c/p\u003e\n\n\u003cp\u003e解像度の範囲はrange(,)の値を変えることで変更できる（後述）\u003c/p\u003e\n\n\u003cp\u003e上図ではCoarse:3, Middle:2, Fine:1となっているが、これもハイパーパラメーターであるstyle_ranges（後述）を変えることで変更できる\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"destination--sourcecoarse-styles-copiedの画像\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#destination--sourcecoarse-styles-copied%E3%81%AE%E7%94%BB%E5%83%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e①Destination + Source（Coarse styles copied）の画像\u003c/h3\u003e\n\n\u003cp\u003e低解像度のスタイルだけはSourceのスタイルを使ったDestination画像\u003c/p\u003e\n\n\u003cp\u003e例）背景・髪の色に関してはDestinationのスタイルをそのまま使い、顔の向き・輪郭・髪型・眼鏡はSourceのスタイルを使う\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"destination--sourcemiddle-styles-copiedの画像\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#destination--sourcemiddle-styles-copied%E3%81%AE%E7%94%BB%E5%83%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e②Destination + Source（Middle styles copied）の画像\u003c/h3\u003e\n\n\u003cp\u003e中間解像度のスタイルだけはSourceのスタイルを使ったDestination画像\u003c/p\u003e\n\n\u003cp\u003e例）顔の向き・輪郭・髪型に関してはDestinationのスタイルをそのまま使い、髪質・髪の色・顔のパーツはSourceのスタイルを使う\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"destination--sourcefine-styles-copiedの画像\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#destination--sourcefine-styles-copied%E3%81%AE%E7%94%BB%E5%83%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e③Destination + Source（Fine styles copied）の画像\u003c/h3\u003e\n\n\u003cp\u003e高解像度のスタイルだけはSourceのスタイルを使ったDestination画像\u003c/p\u003e\n\n\u003cp\u003e例）顔の向き・顔のパーツ・髪型に関してはDestinationのスタイルをそのまま使い、背景の色や髪の色などの細かい部分はSourceのスタイルを使う\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"スタイルミックスのコード\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB%E3%83%9F%E3%83%83%E3%82%AF%E3%82%B9%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eスタイルミックスのコード\u003c/h2\u003e\n\n\u003cp\u003eこのコードは何も変更せずにコピペして実行すれば大丈夫\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003edraw_style_mixing_figure\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epng\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eGs\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ew\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eh\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esrc_seeds\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edst_seeds\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003estyle_ranges\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eprint\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epng\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003esrc_latents\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003estack\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erandom\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRandomState\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eseed\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"n\"\u003erandn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eGs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003einput_shape\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003eseed\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003esrc_seeds\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003edst_latents\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003estack\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erandom\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eRandomState\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eseed\u003c/span\u003e\u003cspan class=\"p\"\u003e).\u003c/span\u003e\u003cspan class=\"n\"\u003erandn\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eGs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003einput_shape\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e])\u003c/span\u003e \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003eseed\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003edst_seeds\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003esrc_dlatents\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eGs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecomponents\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emapping\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erun\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esrc_latents\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"c1\"\u003e# [seed, layer, component]\n\u003c/span\u003e    \u003cspan class=\"n\"\u003edst_dlatents\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eGs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecomponents\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003emapping\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erun\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edst_latents\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"bp\"\u003eNone\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"c1\"\u003e# [seed, layer, component]\n\u003c/span\u003e    \u003cspan class=\"n\"\u003esrc_images\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eGs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecomponents\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esynthesis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erun\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esrc_dlatents\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003erandomize_noise\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eFalse\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e**\u003c/span\u003e\u003cspan class=\"n\"\u003esynthesis_kwargs\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"n\"\u003edst_images\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eGs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecomponents\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esynthesis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erun\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edst_dlatents\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003erandomize_noise\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eFalse\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e**\u003c/span\u003e\u003cspan class=\"n\"\u003esynthesis_kwargs\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n    \u003cspan class=\"n\"\u003ecanvas\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003ePIL\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eImage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003enew\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"s\"\u003e'RGB'\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ew\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esrc_seeds\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003eh\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edst_seeds\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)),\u003c/span\u003e \u003cspan class=\"s\"\u003e'white'\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n    \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esrc_image\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"nb\"\u003eenumerate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esrc_images\u003c/span\u003e\u003cspan class=\"p\"\u003e)):\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ecanvas\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epaste\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ePIL\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eImage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003efromarray\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esrc_image\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e'RGB'\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"n\"\u003ecol\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ew\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003edst_image\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"nb\"\u003eenumerate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edst_images\u003c/span\u003e\u003cspan class=\"p\"\u003e)):\u003c/span\u003e\n        \u003cspan class=\"n\"\u003ecanvas\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epaste\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ePIL\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eImage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003efromarray\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003edst_image\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e'RGB'\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erow\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eh\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n        \u003cspan class=\"n\"\u003erow_dlatents\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003estack\u003c/span\u003e\u003cspan class=\"p\"\u003e([\u003c/span\u003e\u003cspan class=\"n\"\u003edst_dlatents\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"p\"\u003e]]\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"nb\"\u003elen\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003esrc_seeds\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n        \u003cspan class=\"n\"\u003erow_dlatents\u003c/span\u003e\u003cspan class=\"p\"\u003e[:,\u003c/span\u003e \u003cspan class=\"n\"\u003estyle_ranges\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"p\"\u003e]]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003esrc_dlatents\u003c/span\u003e\u003cspan class=\"p\"\u003e[:,\u003c/span\u003e \u003cspan class=\"n\"\u003estyle_ranges\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003erow\u003c/span\u003e\u003cspan class=\"p\"\u003e]]\u003c/span\u003e\n        \u003cspan class=\"n\"\u003erow_images\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eGs\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecomponents\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esynthesis\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003erun\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erow_dlatents\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003erandomize_noise\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eFalse\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"o\"\u003e**\u003c/span\u003e\u003cspan class=\"n\"\u003esynthesis_kwargs\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"k\"\u003efor\u003c/span\u003e \u003cspan class=\"n\"\u003ecol\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eimage\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"nb\"\u003eenumerate\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"nb\"\u003elist\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erow_images\u003c/span\u003e\u003cspan class=\"p\"\u003e)):\u003c/span\u003e\n            \u003cspan class=\"n\"\u003ecanvas\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epaste\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ePIL\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eImage\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003efromarray\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eimage\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e'RGB'\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"p\"\u003e((\u003c/span\u003e\u003cspan class=\"n\"\u003ecol\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003ew\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003erow\u003c/span\u003e \u003cspan class=\"o\"\u003e+\u003c/span\u003e \u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"o\"\u003e*\u003c/span\u003e \u003cspan class=\"n\"\u003eh\u003c/span\u003e\u003cspan class=\"p\"\u003e))\u003c/span\u003e\n    \u003cspan class=\"n\"\u003ecanvas\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003esave\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003epng\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\n\u003cspan class=\"k\"\u003edef\u003c/span\u003e \u003cspan class=\"nf\"\u003eload_Gs\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eurl\u003c/span\u003e\u003cspan class=\"p\"\u003e):\u003c/span\u003e\n    \u003cspan class=\"k\"\u003eif\u003c/span\u003e \u003cspan class=\"n\"\u003eurl\u003c/span\u003e \u003cspan class=\"ow\"\u003enot\u003c/span\u003e \u003cspan class=\"ow\"\u003ein\u003c/span\u003e \u003cspan class=\"n\"\u003e_Gs_cache\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n        \u003cspan class=\"k\"\u003ewith\u003c/span\u003e \u003cspan class=\"n\"\u003ednnlib\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eutil\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eopen_url\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eurl\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ecache_dir\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003econfig\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecache_dir\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003ef\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n            \u003cspan class=\"n\"\u003e_G\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_D\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eGs\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epickle\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eload\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ef\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n        \u003cspan class=\"n\"\u003e_Gs_cache\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eurl\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003eGs\u003c/span\u003e\n    \u003cspan class=\"k\"\u003ereturn\u003c/span\u003e \u003cspan class=\"n\"\u003e_Gs_cache\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"n\"\u003eurl\u003c/span\u003e\u003cspan class=\"p\"\u003e]\u003c/span\u003e\n\n\u003cspan class=\"n\"\u003eurl_ffhq\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e'https://drive.google.com/uc?id=1MEGjdvVpUsu1jB4zrXZN7Y4kBBOzizDQ'\u003c/span\u003e \u003cspan class=\"c1\"\u003e# karras2019stylegan-ffhq-1024x1024.pkl\n\u003c/span\u003e\u003cspan class=\"n\"\u003e_Gs_cache\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003edict\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"n\"\u003esynthesis_kwargs\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"nb\"\u003edict\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eoutput_transform\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"nb\"\u003edict\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003efunc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003etflib\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003econvert_images_to_uint8\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003enchw_to_nhwc\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"bp\"\u003eTrue\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003eminibatch_size\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e8\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e上記のコードを実行したら続いて次の章のコード（draw_style_mixing_........）を実行する\u003cbr\u003e\n（draw_style_mixing_........）のコードは各自で自由に変更できるところがある\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"自由に変更できるところ\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%87%AA%E7%94%B1%E3%81%AB%E5%A4%89%E6%9B%B4%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%A8%E3%81%93%E3%82%8D\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e自由に変更できるところ\u003c/h2\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"n\"\u003edraw_style_mixing_figure\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eos\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003epath\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ejoin\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003econfig\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eresult_dir\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"s\"\u003e'figure03-style-mixing15.png'\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e \u003cspan class=\"n\"\u003eload_Gs\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eurl_ffhq\u003c/span\u003e\u003cspan class=\"p\"\u003e),\u003c/span\u003e\n                         \u003cspan class=\"n\"\u003ew\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e1024\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eh\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"mi\"\u003e1024\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003esrc_seeds\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e48\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e63\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e13\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e68\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e \u003cspan class=\"n\"\u003edst_seeds\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"mi\"\u003e36\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e18\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e26\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e29\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e33\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e84\u003c/span\u003e\u003cspan class=\"p\"\u003e],\u003c/span\u003e\n                         \u003cspan class=\"n\"\u003estyle_ranges\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nb\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nb\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e8\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nb\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e8\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e18\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"src_seeds\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#src_seeds\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003esrc_seeds\u003c/h3\u003e\n\n\u003cp\u003eSource（１行目の画像）を何にするか、数字はRandomStateを意味する\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"dst_seeds\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#dst_seeds\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003edst_seeds\u003c/h3\u003e\n\n\u003cp\u003eDestination（１列目の画像）を何にするか\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"style_ranges\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#style_ranges\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003estyle_ranges\u003c/h3\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"range--について\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#range--%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003erange( , )について\u003c/h4\u003e\n\n\u003cp\u003eGsのモデルアーキテクチャの一部は以下のようになっている\u003c/p\u003e\n\n\u003cp\u003e\u003cstrong\u003e1\u003c/strong\u003e層目のconv: 解像度4×4、\u003cstrong\u003e2\u003c/strong\u003e層目のconv: 解像度4×4、\u003cstrong\u003e3\u003c/strong\u003e層目のconv: 解像度8×8、\u003cstrong\u003e4\u003c/strong\u003e層目のconv: 解像度8×8 \u003cbr\u003e\n\u003cstrong\u003e5\u003c/strong\u003e層目のconv: 解像度16×16、\u003cstrong\u003e6\u003c/strong\u003e層目のconv: 解像度16×16、\u003cstrong\u003e7\u003c/strong\u003e層目のconv: 解像度32×32、\u003cbr\u003e\n\u003cstrong\u003e8\u003c/strong\u003e層目のconv: 解像度32×32、\u003cstrong\u003e9\u003c/strong\u003e層目のconv: 解像度64×64、\u003cstrong\u003e10\u003c/strong\u003e層目のconv: 解像度64×64、\u003cbr\u003e\n\u003cstrong\u003e11\u003c/strong\u003e層目のconv: 解像度128×128、\u003cstrong\u003e12\u003c/strong\u003e層目のconv: 解像度128×128、\u003cstrong\u003e13\u003c/strong\u003e層目のconv: 解像度256×256、\u003cbr\u003e\n\u003cstrong\u003e14\u003c/strong\u003e層目のconv: 解像度256×256、 \u003cstrong\u003e15\u003c/strong\u003e層目のconv: 解像度512×512、\u003cstrong\u003e16\u003c/strong\u003e層目のconv: 解像度512×512\u003cbr\u003e\n\u003cstrong\u003e17\u003c/strong\u003e層目のconv: 解像度1024×1024、\u003cstrong\u003e18\u003c/strong\u003e層目のconv: 解像度1024×1024\u003c/p\u003e\n\n\u003cp\u003e・１層目から１８層目を３つのグループ（CoarseとMiddleとFine）に分けたい\u003c/p\u003e\n\n\u003cp\u003e・\u003cstrong\u003eCoarse, Middle, Fineのそれぞれの範囲（何層目から何層目の解像度にするのか）をrange( , )を使って自由に指定することができる\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e以下２つの例でどういうことかを確認してみる\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"例１-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BE%8B%EF%BC%91-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e例１\u003c/h4\u003e\n\n\u003cp\u003eCoarse：\u003cstrong\u003e4×4~8×8\u003c/strong\u003e, Middle:\u003cstrong\u003e16×16~32×32\u003c/strong\u003e, Fine:\u003cstrong\u003e64×64~1024×1024\u003c/strong\u003eと設定し、\u003cbr\u003e\n６枚の生成画像の内、\u003cstrong\u003e３\u003c/strong\u003e枚はSourceの低解像度(Coarse)スタイル、\u003cstrong\u003e２\u003c/strong\u003e枚はSourceの中間解像度(Middle)スタイル、\u003cstrong\u003e１\u003c/strong\u003e枚はSourceの高解像度(Fine)スタイルを使いたいときは以下のようなコードになる\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nb\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nb\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e4\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e8\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nb\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e8\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e18\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e$range(0,4)$＝\u003cstrong\u003e1\u003c/strong\u003e層目から\u003cstrong\u003e４\u003c/strong\u003e層目（コードは0スタートのため1つずれている）＝4×4~8×8の解像度\u003cbr\u003e\n$range(4,8)$＝\u003cstrong\u003e５\u003c/strong\u003e層目から\u003cstrong\u003e８\u003c/strong\u003e層目＝16×16~32×32の解像度\u003cbr\u003e\n$range(8,18)$＝\u003cstrong\u003e９\u003c/strong\u003e層目から\u003cstrong\u003e１８\u003c/strong\u003e層目＝64×64~1024×1024の解像度\u003c/p\u003e\n\n\u003cp\u003erange(,)の後にある\u003cstrong\u003e*3\u003c/strong\u003eと\u003cstrong\u003e*2\u003c/strong\u003eと\u003cstrong\u003e*1\u003c/strong\u003eの値を自由に変更することで、Coarse, Middle, Fineの区切りを決めることができる\u003c/p\u003e\n\n\u003cp\u003e本章初めに添付したスタイルミックス画像はこの設定で生成されたもの\u003c/p\u003e\n\n\u003ch4\u003e\n\u003cspan id=\"例２-1\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BE%8B%EF%BC%92-1\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e例２\u003c/h4\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nb\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e0\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"mi\"\u003e1\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nb\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e6\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e12\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"mi\"\u003e3\u003c/span\u003e\u003cspan class=\"o\"\u003e+\u003c/span\u003e\u003cspan class=\"p\"\u003e[\u003c/span\u003e\u003cspan class=\"nb\"\u003erange\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"mi\"\u003e12\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e\u003cspan class=\"mi\"\u003e18\u003c/span\u003e\u003cspan class=\"p\"\u003e)]\u003c/span\u003e\u003cspan class=\"o\"\u003e*\u003c/span\u003e\u003cspan class=\"mi\"\u003e2\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003e同じように考えると例２は\u003cbr\u003e\nCoarse：\u003cstrong\u003e4×4~16×16\u003c/strong\u003e, Middle:\u003cstrong\u003e32×32~128×128\u003c/strong\u003e, Fine:\u003cstrong\u003e256×256~1024×1024\u003c/strong\u003eとし、\u003cbr\u003e\n６枚の生成画像の内、\u003cstrong\u003e１\u003c/strong\u003e枚はSourceの低解像度(Coarse)スタイル、\u003cstrong\u003e３\u003c/strong\u003e枚はSourceの中間解像度(Middle)スタイル、\u003cstrong\u003e２\u003c/strong\u003e枚はSourceの高解像度(Fine)スタイルを使いたいときの設定である\u003c/p\u003e\n\n\u003cp\u003e例２の設定で生成したスタイルミックス画像は以下のようになる\u003c/p\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F097091e1-563d-5b6c-6c9c-75868f58d76c.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=8602b10aa9b639929770465f0d60d322\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F097091e1-563d-5b6c-6c9c-75868f58d76c.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=8602b10aa9b639929770465f0d60d322\" alt=\"image.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/315063/097091e1-563d-5b6c-6c9c-75868f58d76c.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F097091e1-563d-5b6c-6c9c-75868f58d76c.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=78a675e0d644807d464a2391b74906e8 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003erange( , )を変更することで解像度の範囲を変えられることを示したが、\u003cstrong\u003e個人的にはデフォルト通りの\u003cbr\u003e\nCoarse：4×4~8×8, Middle:16×16~32×32, Fine:64×64~1024×1024を推奨する\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e実際に各解像度の画像を見ると、4×4~8×8はかなりぼやけていて、16×16~32×32になるとぼやけてはいるがどういう顔なのか大まかにわかる、64×64~1024×1024になるとぼやけのない鮮明な画像であることが確認できる\u003c/p\u003e\n\n\u003cp\u003eそのためこの分け方(Coarse：4×4~8×8, Middle:16×16~32×32, Fine:64×64~1024×1024)が一番自然だと思う\u003c/p\u003e\n\n\u003chr\u003e\n\n\u003cp\u003e画像表示とダウンロードをしたいときは上述の⑥「Google Colaboratory上で生成画像を表示してみる」と「⑦画像をダウンロードする」の章で記載したコードをそのまま使える\u003c/p\u003e\n\n\u003cp\u003eただし、画像ファイルの名前を変えた場合はパス（例：\"results/example200\"）を変更する必要がある\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"他のデータセットで学習されたモデルを使って画像生成してみる\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E4%BB%96%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E3%82%BB%E3%83%83%E3%83%88%E3%81%A7%E5%AD%A6%E7%BF%92%E3%81%95%E3%82%8C%E3%81%9F%E3%83%A2%E3%83%87%E3%83%AB%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E7%94%BB%E5%83%8F%E7%94%9F%E6%88%90%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e他のデータセットで学習されたモデルを使って画像生成してみる\u003c/h1\u003e\n\n\u003cp\u003e・これまで添付した画像はFFHQデータセットで学習したgeneratorが生成した顔画像\u003c/p\u003e\n\n\u003cp\u003e・\u003cstrong\u003e「②generatorをロードする」の章で紹介したコードの中の「url=.....」の部分だけを変えることで他の画像を生成できる\u003c/strong\u003e\u003c/p\u003e\n\n\u003cp\u003e・urlを変えたら、それ以降は前述した顔画像生成と同じコードを順番に実行する\u003c/p\u003e\n\n\u003cp\u003e・下図はすべて実際にurlだけを変えて生成してみた画像\u003c/p\u003e\n\n\u003chr\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"celebahqデータセットで学習されたモデルを使いたい場合\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#celebahq%E3%83%87%E3%83%BC%E3%82%BF%E3%82%BB%E3%83%83%E3%83%88%E3%81%A7%E5%AD%A6%E7%BF%92%E3%81%95%E3%82%8C%E3%81%9F%E3%83%A2%E3%83%87%E3%83%AB%E3%82%92%E4%BD%BF%E3%81%84%E3%81%9F%E3%81%84%E5%A0%B4%E5%90%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003ecelebAHQデータセットで学習されたモデルを使いたい場合\u003c/h3\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fe916585a-c9cc-0864-2727-51e9f73c3868.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=5b16e1258bc61b6b34d791931ca03f2c\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fe916585a-c9cc-0864-2727-51e9f73c3868.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=5b16e1258bc61b6b34d791931ca03f2c\" alt=\"celeb30.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/315063/e916585a-c9cc-0864-2727-51e9f73c3868.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fe916585a-c9cc-0864-2727-51e9f73c3868.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=4ebfce90eed663d7f25742054972bc8c 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nRandomState(30)\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003eos\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003epickle\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003enumpy\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003enp\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003ePIL.Image\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003ednnlib\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003ednnlib.tflib\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003etflib\u003c/span\u003e\n\u003cspan class=\"kn\"\u003eimport\u003c/span\u003e \u003cspan class=\"nn\"\u003econfig\u003c/span\u003e\n\n\u003cspan class=\"c1\"\u003e# Initialize TensorFlow.\n\u003c/span\u003e\u003cspan class=\"n\"\u003etflib\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003einit_tf\u003c/span\u003e\u003cspan class=\"p\"\u003e()\u003c/span\u003e\n\u003cspan class=\"c1\"\u003e# Load pre-trained network.\n\u003c/span\u003e\u003cspan class=\"n\"\u003eurl\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e'https://drive.google.com/uc?id=1MGqJl28pN4t7SAtSrPdSRJSQJqahkzUf'\u003c/span\u003e \u003cspan class=\"c1\"\u003e# karras2019stylegan-celebahq-1024x1024.pkl\n\u003c/span\u003e\u003cspan class=\"k\"\u003ewith\u003c/span\u003e \u003cspan class=\"n\"\u003ednnlib\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eutil\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eopen_url\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003eurl\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003ecache_dir\u003c/span\u003e\u003cspan class=\"o\"\u003e=\u003c/span\u003e\u003cspan class=\"n\"\u003econfig\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003ecache_dir\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e \u003cspan class=\"k\"\u003eas\u003c/span\u003e \u003cspan class=\"n\"\u003ef\u003c/span\u003e\u003cspan class=\"p\"\u003e:\u003c/span\u003e\n    \u003cspan class=\"n\"\u003e_G\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003e_D\u003c/span\u003e\u003cspan class=\"p\"\u003e,\u003c/span\u003e \u003cspan class=\"n\"\u003eGs\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"n\"\u003epickle\u003c/span\u003e\u003cspan class=\"p\"\u003e.\u003c/span\u003e\u003cspan class=\"n\"\u003eload\u003c/span\u003e\u003cspan class=\"p\"\u003e(\u003c/span\u003e\u003cspan class=\"n\"\u003ef\u003c/span\u003e\u003cspan class=\"p\"\u003e)\u003c/span\u003e\n\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003cp\u003eurlだけが変わって、それ以外は全く同じであることが確認できると思う\u003c/p\u003e\n\n\u003ch2\u003e\n\u003cspan id=\"顔以外の画像も生成したい場合\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E9%A1%94%E4%BB%A5%E5%A4%96%E3%81%AE%E7%94%BB%E5%83%8F%E3%82%82%E7%94%9F%E6%88%90%E3%81%97%E3%81%9F%E3%81%84%E5%A0%B4%E5%90%88\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e顔以外の画像も生成したい場合\u003c/h2\u003e\n\n\u003cp\u003eベッドルーム・車・猫の画像を生成したいときもurlを変更するだけ\u003c/p\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"ベッドルーム画像\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%83%99%E3%83%83%E3%83%89%E3%83%AB%E3%83%BC%E3%83%A0%E7%94%BB%E5%83%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eベッドルーム画像\u003c/h3\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fca2ddc13-da4b-8b5d-f67d-abba39438806.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=5f9779140521bb490fd698faea67a9e3\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fca2ddc13-da4b-8b5d-f67d-abba39438806.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=5f9779140521bb490fd698faea67a9e3\" alt=\"bed32.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/315063/ca2ddc13-da4b-8b5d-f67d-abba39438806.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fca2ddc13-da4b-8b5d-f67d-abba39438806.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=a05e7afde90c619a479dc3979045ebd4 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003cbr\u003e\nRandomState(32)\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\n\u003cspan class=\"n\"\u003eurl\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e'https://drive.google.com/uc?id=1MOSKeGF0FJcivpBI7s63V9YHloUTORiF'\u003c/span\u003e \u003cspan class=\"c1\"\u003e# karras2019stylegan-bedrooms-256x256.pkl\n\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"車画像\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E8%BB%8A%E7%94%BB%E5%83%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e車画像\u003c/h3\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F3b4f52a9-0f76-7965-f77d-41afcec2b45d.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=00ca16504b424cb90e31fc5b03be5c50\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F3b4f52a9-0f76-7965-f77d-41afcec2b45d.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=00ca16504b424cb90e31fc5b03be5c50\" alt=\"car41.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/315063/3b4f52a9-0f76-7965-f77d-41afcec2b45d.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F3b4f52a9-0f76-7965-f77d-41afcec2b45d.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=7c5a3b12a66eaf261eb2ee9aa91ad75b 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eRandomState(41)\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"n\"\u003eurl\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e'https://drive.google.com/uc?id=1MJ6iCfNtMIRicihwRorsM3b7mmtmK9c3'\u003c/span\u003e \u003cspan class=\"c1\"\u003e# karras2019stylegan-cars-512x384.pkl\n\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch3\u003e\n\u003cspan id=\"猫画像\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E7%8C%AB%E7%94%BB%E5%83%8F\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003e猫画像\u003c/h3\u003e\n\n\u003cp\u003e\u003ca href=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F4eeba615-53a7-4ee8-255a-9b9f532a8eaf.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=abc3da720f671d324852d73e544fd817\" target=\"_blank\" rel=\"nofollow noopener\"\u003e\u003cimg src=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F4eeba615-53a7-4ee8-255a-9b9f532a8eaf.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;s=abc3da720f671d324852d73e544fd817\" alt=\"cat35.png\" data-canonical-src=\"https://qiita-image-store.s3.amazonaws.com/0/315063/4eeba615-53a7-4ee8-255a-9b9f532a8eaf.png\" srcset=\"https://qiita-user-contents.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2F4eeba615-53a7-4ee8-255a-9b9f532a8eaf.png?ixlib=rb-1.2.2\u0026amp;auto=format\u0026amp;gif-q=60\u0026amp;q=75\u0026amp;w=1400\u0026amp;fit=max\u0026amp;s=b8927a34e5c8be710a653649cebe869e 1x\" loading=\"lazy\"\u003e\u003c/a\u003e\u003c/p\u003e\n\n\u003cp\u003eRandomState(35)\u003c/p\u003e\n\n\u003cdiv class=\"code-frame\" data-lang=\"python\"\u003e\u003cdiv class=\"highlight\"\u003e\u003cpre\u003e\u003cspan class=\"n\"\u003eurl\u003c/span\u003e \u003cspan class=\"o\"\u003e=\u003c/span\u003e \u003cspan class=\"s\"\u003e'https://drive.google.com/uc?id=1MQywl0FNt6lHu8E_EUqnRbviagS7fbiJ'\u003c/span\u003e \u003cspan class=\"c1\"\u003e# karras2019stylegan-cats-256x256.pkl\n\u003c/span\u003e\u003c/pre\u003e\u003c/div\u003e\u003c/div\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"まとめ感想\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81%E6%84%9F%E6%83%B3\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eまとめ・感想\u003c/h1\u003e\n\n\u003cp\u003e・StyleGANを１から訓練するのは大変だと思うが、学習済みのモデルを使えばGANの学習に伴う難しいことを考えずに画像を生成することができる\u003c/p\u003e\n\n\u003cp\u003e・実際にコードを動かしてみると、論文を読むだけでは気づくことができないことも発見できる\u003cbr\u003e\n例えば、ハイパーパラメータがどのように生成画像に影響を与えるのかは自分で生成してみることで初めて実感できる\u003c/p\u003e\n\n\u003ch1\u003e\n\u003cspan id=\"コード\" class=\"fragment\"\u003e\u003c/span\u003e\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%83%89\"\u003e\u003ci class=\"fa fa-link\"\u003e\u003c/i\u003e\u003c/a\u003eコード\u003c/h1\u003e\n\n\u003cp\u003e\u003ca href=\"https://github.com/NVlabs/stylegan\" class=\"autolink\" rel=\"nofollow noopener\" target=\"_blank\"\u003ehttps://github.com/NVlabs/stylegan\u003c/a\u003e\u003c/p\u003e\n","createdAt":"2019-03-31T23:30:18Z","elapsedYearsFromUpdatedAt":1,"isBanned":false,"isDeprecated":true,"isDestroyableByViewer":false,"isEditRequestSendableByViewer":true,"isLikableByViewer":true,"isLikedByViewer":false,"isPublic":true,"isSlide":false,"isStockableByViewer":true,"isStockedByViewer":false,"isUpdatableByViewer":false,"isSubscribableByViewer":true,"isSubscribedByViewer":false,"isUpdated":false,"likesCount":108,"originalId":848368,"title":"Google ColaboratoryでStyleGANを使ってみた。","toc":"\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%9C%AC%E8%A8%98%E4%BA%8B%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003e本記事について\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%94%BB%E5%83%8F%E7%94%9F%E6%88%90\"\u003e画像生成\u003c/a\u003e\n\u003cul\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%BA%96%E5%82%99\"\u003e①準備\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#generator%E3%82%92%E3%83%AD%E3%83%BC%E3%83%89%E3%81%99%E3%82%8B\"\u003e②generatorをロードする\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%BD%9C%E5%9C%A8%E3%83%99%E3%82%AF%E3%83%88%E3%83%AB%E3%82%92%E9%81%B8%E3%81%B6\"\u003e③潜在ベクトルを選ぶ\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%94%BB%E5%83%8F%E7%94%9F%E6%88%90-1\"\u003e④画像生成\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%94%9F%E6%88%90%E7%94%BB%E5%83%8F%E3%82%92%E4%BF%9D%E5%AD%98%E3%81%99%E3%82%8B\"\u003e⑤生成画像を保存する\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#google-colaboratory%E4%B8%8A%E3%81%A7%E7%94%9F%E6%88%90%E7%94%BB%E5%83%8F%E3%82%92%E8%A1%A8%E7%A4%BA%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\"\u003e⑥Google Colaboratory上で生成画像を表示してみる\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%94%BB%E5%83%8F%E3%82%92%E3%83%80%E3%82%A6%E3%83%B3%E3%83%AD%E3%83%BC%E3%83%89%E3%81%99%E3%82%8B\"\u003e⑦画像をダウンロードする\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\n\u003cli\u003e\n\u003ca href=\"#%E3%83%8F%E3%82%A4%E3%83%91%E3%83%BC%E3%83%91%E3%83%A9%E3%83%A1%E3%83%BC%E3%82%BF%E3%82%92%E5%A4%89%E3%81%88%E3%81%A6%E3%81%BF%E3%82%8B\"\u003eハイパーパラメータを変えてみる\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E6%BD%9C%E5%9C%A8%E5%A4%89%E6%95%B0\"\u003e潜在変数\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#randomstate841%E3%81%AE%E5%A0%B4%E5%90%88\"\u003eRandomState(841)の場合\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#randomstate231%E3%81%AE%E5%A0%B4%E5%90%88\"\u003eRandomState(231)の場合\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#truncation_psi\"\u003etruncation_psi\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BE%8B%EF%BC%91\"\u003e例１\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BE%8B%EF%BC%92\"\u003e例２\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%A4%E3%83%A1%E3%83%BC%E3%82%B8\"\u003eイメージ\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB%E3%83%9F%E3%83%83%E3%82%AF%E3%82%B9\"\u003eスタイルミックス\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB%E3%83%9F%E3%83%83%E3%82%AF%E3%82%B9%E7%94%BB%E5%83%8F%E3%81%AE%E8%A6%8B%E6%96%B9\"\u003eスタイルミックス画像の見方\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#destination--sourcecoarse-styles-copied%E3%81%AE%E7%94%BB%E5%83%8F\"\u003e①Destination + Source（Coarse styles copied）の画像\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#destination--sourcemiddle-styles-copied%E3%81%AE%E7%94%BB%E5%83%8F\"\u003e②Destination + Source（Middle styles copied）の画像\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#destination--sourcefine-styles-copied%E3%81%AE%E7%94%BB%E5%83%8F\"\u003e③Destination + Source（Fine styles copied）の画像\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B9%E3%82%BF%E3%82%A4%E3%83%AB%E3%83%9F%E3%83%83%E3%82%AF%E3%82%B9%E3%81%AE%E3%82%B3%E3%83%BC%E3%83%89\"\u003eスタイルミックスのコード\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%87%AA%E7%94%B1%E3%81%AB%E5%A4%89%E6%9B%B4%E3%81%A7%E3%81%8D%E3%82%8B%E3%81%A8%E3%81%93%E3%82%8D\"\u003e自由に変更できるところ\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#src_seeds\"\u003esrc_seeds\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#dst_seeds\"\u003edst_seeds\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#style_ranges\"\u003estyle_ranges\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#range--%E3%81%AB%E3%81%A4%E3%81%84%E3%81%A6\"\u003erange( , )について\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BE%8B%EF%BC%91-1\"\u003e例１\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BE%8B%EF%BC%92-1\"\u003e例２\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E4%BB%96%E3%81%AE%E3%83%87%E3%83%BC%E3%82%BF%E3%82%BB%E3%83%83%E3%83%88%E3%81%A7%E5%AD%A6%E7%BF%92%E3%81%95%E3%82%8C%E3%81%9F%E3%83%A2%E3%83%87%E3%83%AB%E3%82%92%E4%BD%BF%E3%81%A3%E3%81%A6%E7%94%BB%E5%83%8F%E7%94%9F%E6%88%90%E3%81%97%E3%81%A6%E3%81%BF%E3%82%8B\"\u003e他のデータセットで学習されたモデルを使って画像生成してみる\u003c/a\u003e\n\u003cul\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#celebahq%E3%83%87%E3%83%BC%E3%82%BF%E3%82%BB%E3%83%83%E3%83%88%E3%81%A7%E5%AD%A6%E7%BF%92%E3%81%95%E3%82%8C%E3%81%9F%E3%83%A2%E3%83%87%E3%83%AB%E3%82%92%E4%BD%BF%E3%81%84%E3%81%9F%E3%81%84%E5%A0%B4%E5%90%88\"\u003ecelebAHQデータセットで学習されたモデルを使いたい場合\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E9%A1%94%E4%BB%A5%E5%A4%96%E3%81%AE%E7%94%BB%E5%83%8F%E3%82%82%E7%94%9F%E6%88%90%E3%81%97%E3%81%9F%E3%81%84%E5%A0%B4%E5%90%88\"\u003e顔以外の画像も生成したい場合\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%83%99%E3%83%83%E3%83%89%E3%83%AB%E3%83%BC%E3%83%A0%E7%94%BB%E5%83%8F\"\u003eベッドルーム画像\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E8%BB%8A%E7%94%BB%E5%83%8F\"\u003e車画像\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E7%8C%AB%E7%94%BB%E5%83%8F\"\u003e猫画像\u003c/a\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\n\n\u003cli\u003e\n\u003ca href=\"#%E3%81%BE%E3%81%A8%E3%82%81%E6%84%9F%E6%83%B3\"\u003eまとめ・感想\u003c/a\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003ca href=\"#%E3%82%B3%E3%83%BC%E3%83%89\"\u003eコード\u003c/a\u003e\n\u003c/li\u003e\n\n","totalPv":8540,"updatedAt":"2019-03-31T23:30:18Z","uuid":"12d21916de56d125f0be","banReason":null,"adventCalendarItem":null,"author":{"originalId":315063,"description":"何となく思ったことを公開中。\r\n24/7暇人なので、お気軽にご連絡ください。\r\n\r\nJDLA Deep Learning for /ENGINEER 2019 #1/\r\nGENERAL 2019 #1/ TOEIC965","name":"","profileImageUrl":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fprofile-images%2F1542036351?ixlib=rb-1.2.2\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=1d1b57ae03ff5238c2aa8ef73a29abab","profileImageUrlW48":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fprofile-images%2F1542036351?ixlib=rb-1.2.2\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=1d1b57ae03ff5238c2aa8ef73a29abab","profileImageUrlW75":"https://qiita-user-profile-images.imgix.net/https%3A%2F%2Fqiita-image-store.s3.amazonaws.com%2F0%2F315063%2Fprofile-images%2F1542036351?ixlib=rb-1.2.2\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=75\u0026s=db21db6bf61fa852966878827d97fcd6","urlName":"Phoeboooo","isBlockingViewer":false,"isFollowedByViewer":false,"isFollowableByViewer":true,"websiteUrl":"","organizations":{"edges":[]}},"tags":[{"name":"Python","urlName":"python"},{"name":"機械学習","urlName":"%e6%a9%9f%e6%a2%b0%e5%ad%a6%e7%bf%92"},{"name":"MachineLearning","urlName":"machinelearning"},{"name":"DeepLearning","urlName":"deeplearning"},{"name":"ディープラーニング","urlName":"%e3%83%87%e3%82%a3%e3%83%bc%e3%83%97%e3%83%a9%e3%83%bc%e3%83%8b%e3%83%b3%e3%82%b0"}],"followingLikers":{"edges":[]},"comments":{"totalCount":1}},"viewer":{"isGithubLoginEnabled":false,"contribution":0,"numberOfDaysSinceRegistration":58,"organizations":{"edges":[]},"followers":{"totalCount":0},"articles":{"totalCount":0},"tags":{"edges":[{"node":{"name":"MacOSX"}},{"node":{"name":"Xcode"}},{"node":{"name":"Chrome"}},{"node":{"name":"GitHub"}}]},"postingArticleTags":{"edges":[]}},"analyticsTrackingId":null}</script>
      
<script src="//d-cache.microad.jp/js/td_qt_access.js" type="text/javascript"></script><script>microadTd.QT.start({"article_category": "Python,機械学習,MachineLearning,DeepLearning,ディープラーニング"})</script><script>(function(d,u){var b=d.getElementsByTagName("script")[0],j=d.createElement("script");j.async=true;j.src=u;b.parentNode.insertBefore(j,b);})(document,"//img.ak.impact-ad.jp/ut/ff9a3577423c8ed5_4330.js");</script><noscript><iframe frameborder="0" height="0" src="//nspt.unitag.jp/ff9a3577423c8ed5_4330.php" width="0"></iframe></noscript><script async="" src="https://www.googletagmanager.com/gtag/js?id=AW-878053044"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());

gtag('config', 'AW-878053044');</script><script>!function(f,b,e,v,n,t,s)
{if(f.fbq)return;n=f.fbq=function(){n.callMethod?
n.callMethod.apply(n,arguments):n.queue.push(arguments)};
if(!f._fbq)f._fbq=n;n.push=n;n.loaded=!0;n.version='2.0';
n.queue=[];t=b.createElement(e);t.async=!0;
t.src=v;s=b.getElementsByTagName(e)[0];
s.parentNode.insertBefore(t,s)}(window, document,'script',
'https://connect.facebook.net/en_US/fbevents.js');
fbq('init', '1792588824374455');
fbq('track', 'PageView');</script><noscript><img height="1" src="https://www.facebook.com/tr?id=1792588824374455&amp;ev=PageView&amp;noscript=1" style="display:none" width="1" /></noscript><footer id="globalFooter" class="st-Footer"><div class="st-Footer_container"><div class="st-Footer_start"><div class="st-Footer_logo"><svg viewbox="0 0 426.57 130" xmlns="http://www.w3.org/2000/svg"><circle cx="167.08" cy="21.4" r="12.28" /><path d="M250.81 29.66h23.48v18.9h-23.48z" /><path d="M300.76 105.26a22.23 22.23 0 01-6.26-.86 12.68 12.68 0 01-5.17-3 14.41 14.41 0 01-3.56-5.76 28 28 0 01-1.3-9.22V48.56h29.61v-18.9h-29.52V3.29h-20.17v83.34q0 11.16 2.83 18.27a27.71 27.71 0 007.7 11.2 26.86 26.86 0 0011.43 5.62 47.56 47.56 0 0012.34 1.53h15.16v-18zM0 61.7a58.6 58.6 0 015-24.21A62.26 62.26 0 0118.73 17.9 63.72 63.72 0 0139 4.78 64.93 64.93 0 0164 0a65 65 0 0124.85 4.78 64.24 64.24 0 0120.38 13.12A62 62 0 01123 37.49a58.6 58.6 0 015 24.21 58.34 58.34 0 01-4 21.46 62.8 62.8 0 01-10.91 18.16l11.1 11.1a10.3 10.3 0 010 14.52 10.29 10.29 0 01-14.64 0l-12.22-12.41a65 65 0 01-15.78 6.65 66.32 66.32 0 01-17.55 2.3 64.63 64.63 0 01-45.23-18A62.82 62.82 0 015 85.81 58.3 58.3 0 010 61.7zm21.64.08a43.13 43.13 0 0012.42 30.63 42.23 42.23 0 0013.43 9.09A41.31 41.31 0 0064 104.8a42 42 0 0030-12.39 42.37 42.37 0 009-13.64 43.43 43.43 0 003.3-17 43.77 43.77 0 00-3.3-17A41.7 41.7 0 0080.55 22 41.78 41.78 0 0064 18.68 41.31 41.31 0 0047.49 22a42.37 42.37 0 00-13.43 9.08 43.37 43.37 0 00-12.42 30.7zM331.89 78a47.59 47.59 0 013.3-17.73 43.22 43.22 0 019.34-14.47A44.25 44.25 0 01359 36a47.82 47.82 0 0118.81-3.58 42.72 42.72 0 019.26 1 46.5 46.5 0 018.22 2.58 40 40 0 017 3.84 44.39 44.39 0 015.71 4.63l1.22-9.47h17.35v85.83h-17.35l-1.17-9.42a42.54 42.54 0 01-5.84 4.67 43.11 43.11 0 01-7 3.79 44.86 44.86 0 01-8.17 2.59 43 43 0 01-9.22 1A47.94 47.94 0 01359 119.9a43.3 43.3 0 01-14.47-9.71 44.17 44.17 0 01-9.34-14.47 47 47 0 01-3.3-17.72zm20.27-.08a29.16 29.16 0 002.17 11.34 27 27 0 005.92 8.88 26.69 26.69 0 008.76 5.76 29.19 29.19 0 0021.44 0 26.11 26.11 0 008.72-5.76 27.57 27.57 0 005.88-8.84 29 29 0 002.16-11.38 28.62 28.62 0 00-2.16-11.22 26.57 26.57 0 00-5.93-8.8 27.68 27.68 0 00-19.51-7.9 28.29 28.29 0 00-10.77 2.05 26.19 26.19 0 00-8.71 5.75 27.08 27.08 0 00-5.84 8.8 28.94 28.94 0 00-2.13 11.31zm-194.97-30.5h19.78v73.54h-19.78zm49.25 0h19.78v73.54h-19.78z" /><circle cx="216.33" cy="21.4" r="12.28" /></svg></div><div class="st-Footer_catchcopy">How developers code is here.</div><div class="st-Footer_socials"><a class="fa fa-twitter" href="https://twitter.com/qiita"></a><a class="fa fa-facebook-square" href="https://www.facebook.com/qiita/"></a></div></div><div class="st-Footer_end"><div class="st-Footer_qiita"><div class="st-Footer_label">Qiita</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="/about">About</a><a href="/terms">利用規約</a><a href="/privacy">プライバシー</a><a target="_blank" href="http://help.qiita.com/ja/articles/qiita-community-guideline">ガイドライン</a></div><div class="st-Footer_column"><a href="/api/v2/docs">API</a><a href="/feedback/new">ご意見</a><a href="https://help.qiita.com">ヘルプ</a><a target="_blank" href="https://qiita.com/ads?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">広告掲載</a></div></div></div><div class="st-Footer_increments"><div class="st-Footer_label">Increments</div><div class="st-Footer_list"><div class="st-Footer_column"><a href="https://increments.co.jp/company/">About</a><a href="https://increments.co.jp/jobs/">採用情報</a><a href="https://blog.qiita.com">ブログ</a></div><div class="st-Footer_column"><a href="https://teams.qiita.com/">Qiita Team</a><a href="https://jobs.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Jobs</a><a href="https://zine.qiita.com?utm_source=qiita&amp;utm_medium=referral&amp;utm_content=footer">Qiita Zine</a></div></div></div></div></div><div class="st-Footer_copyright">© 2011-2020 Increments Inc.</div></footer><div id="Snackbar-react-component-98003527-5b8a-4c10-ae6b-6da94af3b7e3"></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="Snackbar" data-dom-id="Snackbar-react-component-98003527-5b8a-4c10-ae6b-6da94af3b7e3">{}</script>
      
<div id="LoginModal-react-component-97d89b2e-0c96-4f18-b705-98deac902c02"><div class="st-Modal"><div class="st-Modal_backdrop"></div><div class="st-Modal_body lm-Dialog"><div class="fa fa-times lm-Dialog_close"></div><div class="lm-Dialog_title">ユーザー登録して、Qiitaをもっと便利に使ってみませんか。</div><div class="lm-Dialog_message-pc">この機能を利用するにはログインする必要があります。ログインするとさらに便利にQiitaを利用できます。</div><div class="lm-Dialog_message-mobile">この機能を利用するにはログインする必要があります。ログインするとさらに便利にQiitaを利用できます。</div><ol class="lm-Dialog_list"><li>あなたにマッチした記事をお届けします<div class="description">ユーザーやタグをフォローすることで、あなたが興味を持つ技術分野の情報をまとめてキャッチアップできます</div></li><li>便利な情報をあとで効率的に読み返せます<div class="description">気に入った記事を「ストック」することで、あとからすぐに検索できます</div></li></ol><a href="/signup?callback_action=login_or_signup&amp;redirect_to=%2FPhoeboooo%2Fitems%2F12d21916de56d125f0be&amp;realm=qiita" class="lm-Dialog_button lm-Dialog_button-signup">登録する</a><a href="/login?callback_action=login_or_signup&amp;redirect_to=%2FPhoeboooo%2Fitems%2F12d21916de56d125f0be&amp;realm=qiita" class="lm-Dialog_button lm-Dialog_button-signin">ログインする</a></div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="LoginModal" data-dom-id="LoginModal-react-component-97d89b2e-0c96-4f18-b705-98deac902c02">{}</script>
      
<div id="UserHoverCard-react-component-06b6b4eb-7cc2-4503-b931-bbc2438c9ad7"><div class="uh-Container" style="left:0px;top:0px"><div>ユーザーは見つかりませんでした</div></div></div>
      <script type="application/json" class="js-react-on-rails-component" data-component-name="UserHoverCard" data-dom-id="UserHoverCard-react-component-06b6b4eb-7cc2-4503-b931-bbc2438c9ad7">{}</script>
      
</div><div id="dataContainer" style="display: none;" data-config="{&quot;actionPath&quot;:&quot;public/items#show&quot;,&quot;settings&quot;:{&quot;analyticsTrackingId&quot;:&quot;UA-24675221-12&quot;,&quot;mixpanelToken&quot;:&quot;17d24b448ca579c365d2d1057f3a1791&quot;,&quot;assetsMap&quot;:{},&quot;csrfToken&quot;:&quot;Zt8C/Yrz9meGh25LEPqk6zYWKdYHlwe/1SAIPdotnz2/qXnqNPYD/qslEOxDkqzKRi1HMQN5how3FYKtiHVlUg==&quot;,&quot;locale&quot;:&quot;ja&quot;},&quot;currentUser&quot;:{&quot;isStaff&quot;:false,&quot;isJobseeker&quot;:false,&quot;name&quot;:&quot;&quot;,&quot;originalId&quot;:595703,&quot;profileImageUrl&quot;:&quot;https://qiita-user-profile-images.imgix.net/https%3A%2F%2Flh6.googleusercontent.com%2F-3EHSHCCSCmg%2FAAAAAAAAAAI%2FAAAAAAAAAAA%2FAKF05nAVp3wix0GPOS2jqZ7xSDRYCDF6Mw%2Fs50%2Fphoto.jpg?ixlib=rb-1.2.2\u0026auto=compress%2Cformat\u0026lossless=0\u0026w=48\u0026s=be4e5cacc9e0864ac1ef96d37914a7b9&quot;,&quot;urlName&quot;:&quot;syoborian&quot;,&quot;remainingPublicImageUploadableSizeInCurrentMonth&quot;:104857600,&quot;monthlyPublicImageUploadableSizeLimit&quot;:104857600}}" /></body></html><script type="application/json" data-js-react-on-rails-store="AppStore">{"snackbar":{"type":"","body":"","isActive":false}}</script>